"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[27589,15483,73105],{583912:(e,t,s)=>{s.d(t,{linking:()=>p});var i=s(290484),n=s(650151),r=s(820028),o=(s(213377),s(477786)),a=s(388741),l=s(735566),u=s(62802),h=s(588948),c=s(776734),d=s(388130),y=s(296538),m=s(912445);const _=(0,l.getLogger)("Linking");class b{constructor(e,t,s){this.watchedSymbol=new r.WatchedValue,this.seriesShortSymbol=new r.WatchedValue,this.proSymbol=new r.WatchedValue,this.ensuredProSymbol=new r.WatchedValue,this.watchedInterval=new r.WatchedValue,this.watchedIntraday=new r.WatchedValue,this.watchedSeconds=new r.WatchedValue,this.watchedTicks=new r.WatchedValue,this.watchedDataFrequencyResolution=new r.WatchedValue,this.watchedRange=new r.WatchedValue,this.watchedSupportedResolutions=new r.WatchedValue,this.watchedSupportedChartStyles=new r.WatchedValue,this.symbolNamesList=new r.WatchedValue,this._chartWidgetCollection=null,this._chartWidgetBindingState=0,this._activeChartWidget=null,this._linkingGroupCharts=null,this._boundChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._setGroupSymbolCancellationToken={cancelled:!1},this._muted=!1,this.updateBoundChartWidget=()=>{const e=this._chartToBind();e!==this._boundChartWidget&&(null===e?this.unbindFromChartWidget():this.bindToChartWidget(e))},this._updateAllGroupChartWidgets=()=>{this._destroySymbolIntervalPropertySubscriptions?.();const e=(0,n.ensureNotNull)(this._linkingGroupCharts).value(),t=[],s=[];for(const i of e){const e=i.symbolWV().spawn(),n=i.resolutionWV().spawn();e.subscribe(this._updateSymbolByProperty.bind(this,i)),n.subscribe(this._updateIntervalByProperty.bind(this,i)),t.push(e),s.push(n)}this._destroySymbolIntervalPropertySubscriptions=()=>{t.forEach((e=>e.destroy())),s.forEach((e=>e.destroy())),this._destroySymbolIntervalPropertySubscriptions=void 0};const i=this.watchedSymbol.value();e.length>1&&this._needApplySymbol(i)&&!this._muted&&this._setGroupSymbol(i);const r=this.watchedInterval.value();e.length>1&&this._needApplyInterval(r)&&!this._muted&&this._setGroupInterval(r),this.updateBoundChartWidget()},this._groupIndex=e;const i=(e,t)=>{e.subscribe((e=>{s()===this&&t.setValue(e)}),{callWithLast:!0})};i(this.watchedSymbol,t.watchedSymbol),i(this.seriesShortSymbol,t.seriesShortSymbol),i(this.proSymbol,t.proSymbol),i(this.ensuredProSymbol,t.ensuredProSymbol),i(this.watchedInterval,t.watchedInterval),i(this.watchedIntraday,t.watchedIntraday),i(this.watchedSeconds,t.watchedSeconds),i(this.watchedTicks,t.watchedTicks),i(this.watchedDataFrequencyResolution,t.watchedDataFrequencyResolution),i(this.watchedRange,t.watchedRange),i(this.watchedSupportedResolutions,t.watchedSupportedResolutions),i(this.watchedSupportedChartStyles,t.watchedSupportedChartStyles),i(this.symbolNamesList,t.symbolNamesList),this.watchedSymbol.subscribe((e=>{
this._boundChartWidget&&this._boundChartWidget.hasModel()&&this._mainSeries().symbolSameAsCurrent(e)||this.proSymbol.setValue(e)}),{callWithLast:!0})}mute(e){this._muted=e}bindToChartWidgetCollection(e){this.unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._activeChartWidget=e.activeChartWidget.spawn(),this._activeChartWidget.subscribe(this.updateBoundChartWidget),this._linkingGroupCharts=e.linkingGroupsCharts(this._groupIndex).spawn(),this._linkingGroupCharts.subscribe(this._updateAllGroupChartWidgets),this.updateBoundChartWidget(),this._updateAllGroupChartWidgets()}unbindFromChartWidgetCollection(){this.unbindFromChartWidget(),this._chartWidgetCollection=null,this._activeChartWidget?.destroy(),this._activeChartWidget=null,this._linkingGroupCharts?.destroy(),this._linkingGroupCharts=null,this._destroySymbolIntervalPropertySubscriptions?.()}bindToChartWidget(e){if(this.unbindFromChartWidget(),this._boundChartWidget=e,e.hasModel())return void this._onChartModelCreated(e.model());e.modelCreated().subscribe(this,this._onChartModelCreated,!0),this._chartWidgetBindingState=1;const t=e.mainSeriesProperties().childs();this.watchedSymbol.setValue(t.symbol.value()),this.watchedInterval.setValue(t.interval.value()),this._boundChartWidget.linkingGroupIndex().subscribe(this.updateBoundChartWidget)}unbindFromChartWidget(){const e=this._boundChartWidget;if(null!==e){switch(this._chartWidgetBindingState){case 1:e.modelCreated().unsubscribeAll(this);break;case 2:this.watchedSymbol.unsubscribe(this._watchedSymbolListenerBound);const t=this._mainSeries().dataEvents();t.symbolResolved().unsubscribeAll(this),t.symbolError().unsubscribeAll(this),this._mainSeries().onIntervalChanged().unsubscribeAll(this),this.watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this.watchedSymbol.writeLock}e.linkingGroupIndex().unsubscribe(this.updateBoundChartWidget),this._boundChartWidget=null,this._chartWidgetBindingState=0}}boundChartWidget(){return this._boundChartWidget}_mainSeries(){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");return this._boundChartWidget.model().mainSeries()}_watchedSymbolListener(e){this._needApplySymbol(e)&&!this._muted&&(this._setGroupSymbol(e),this._sendSnowplowAnalytics())}_updateSymbolByProperty(e,t){const s=this._symbolLock();s&&this._needApplySymbol(t)&&!this._muted&&this._setGroupSymbol(t),(s||e===this._boundChartWidget)&&this.watchedSymbol.setValue(t)}_watchedIntervalListener(e){const t=o.Interval.normalize(e);t&&this._needApplyInterval(t)&&!this._muted&&this._setGroupInterval(t)}_updateIntervalByProperty(e,t){const s=this._intervalLock(),i=o.Interval.normalize(t);s&&i&&this._needApplyInterval(i)&&!this._muted&&this._setGroupInterval(i),(s||e===this._boundChartWidget)&&this.watchedInterval.setValue(i??t)}_sendSnowplowAnalytics(){if(window.user.do_not_track)return;const e=this._mainSeries(),t=()=>{e.dataEvents().symbolResolved().unsubscribe(this,s)},s=s=>{(0,c.getTracker)().then((e=>{if(null===e)return;const t=(0,
n.ensureNotNull)(this._chartWidgetCollection),i=t.layout.value(),r=t.metaInfo.uid.value()||"";e.trackChartSymbols(s.pro_name,s.type,i,r,window.user.declared_status===d.UserStatus.Pro)})),e.dataEvents().symbolError().unsubscribe(this,t)};e.dataEvents().symbolResolved().subscribe(this,s,!0),e.dataEvents().symbolError().subscribe(this,t,!0)}_updateSeriesSymbolInfo(){this.seriesShortSymbol.setValue((0,n.ensureNotNull)(this._boundChartWidget).getSymbol(!0));const e=this._mainSeries().symbolInfo();if(e){const t=e.pro_name||!1;this.proSymbol.setValue(t||this.watchedSymbol.value()),this.ensuredProSymbol.setValue(this.proSymbol.value()),e.aliases&&this.symbolNamesList.setValue(e.aliases);let s=(0,y.allChartStyles)();((0,a.isCloseBasedSymbol)(e)||this._mainSeries().intervalObj().value().is1Tick())&&(s=s.filter((e=>(0,a.isSingleValueBasedStyle)(e)))),this.watchedSupportedChartStyles.setValue(s),this.watchedIntraday.setValue(!!e.has_intraday),this.watchedSeconds.setValue(!!e.has_seconds),this.watchedTicks.setValue(!(0,a.isCloseBasedSymbol)(e)&&!!e["is-tickbars-available"]),this.watchedRange.setValue(!(0,a.isCloseBasedSymbol)(e));const i=e.data_frequency?e.data_frequency:void 0;this.watchedDataFrequencyResolution.setValue(i)}else this.watchedIntraday.setValue(!1),this.watchedSeconds.setValue(!1),this.watchedTicks.setValue(!1),this.watchedRange.setValue(!1),this._mainSeries().isFailed()&&this.ensuredProSymbol.setValue(this.proSymbol.value())}_onChartModelCreated(e){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=2,this.watchedSymbol.setValue(this._boundChartWidget.symbolWV().value()),this.watchedSymbol.subscribe(this._watchedSymbolListenerBound);const t=e.mainSeries().dataEvents();t.symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),t.symbolError().subscribe(this,this._updateSeriesSymbolInfo),e.mainSeries().onIntervalChanged().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),this.watchedInterval.setValue(this._boundChartWidget.resolutionWV().value()),this.watchedInterval.subscribe(this._watchedIntervalListenerBound),this._boundChartWidget.readOnly()&&(this.watchedSymbol.writeLock=!0)}_chartToBind(){const e=this._chartWidgetCollection;return null===e?null:e.activeChartWidget.value().linkingGroupIndex().value()===this._groupIndex?e.activeChartWidget.value():null!==this._boundChartWidget&&this._boundChartWidget.linkingGroupIndex().value()===this._groupIndex?this._boundChartWidget:e.getAll().find((e=>e.linkingGroupIndex().value()===this._groupIndex))??null}_symbolLock(){return!!this._chartWidgetCollection?.lock.symbol.value()}_intervalLock(){return!!this._chartWidgetCollection?.lock.interval.value()}_chartsForLock(e){return(0===e?this._symbolLock():this._intervalLock())?(0,n.ensureNotNull)(this._linkingGroupCharts).value():this._boundChartWidget?[this._boundChartWidget]:[]}_setGroupSymbol(e){this.mute(!0),this._setGroupSymbolCancellationToken.cancelled=!0;const t=this._setGroupSymbolCancellationToken={cancelled:!1};(0,
n.ensureNotNull)(this._chartWidgetCollection).setSymbol(e,this._groupIndex,(0,n.ensureNotNull)(this._boundChartWidget)).finally((()=>{if(this._boundChartWidget&&!t.cancelled){const t=this._boundChartWidget.model().mainSeries();t.symbolSameAsCurrent(e)||(this.watchedSymbol.setValue(t.symbol()),this.proSymbol.setValue(t.proSymbol()))}})),this.mute(!1)}_needApplySymbol(e){const t=this._chartsForLock(0),s=t.find((t=>t.hasModel()&&t.model().mainSeries().symbolInfo()&&t.model().mainSeries().symbolSameAsResolved(e)));if(s){const e=s.model().mainSeries();if(t.every((t=>e.symbolSameAsResolved(t.symbolWV().value()))))return!1}return t.some((t=>t.symbolWV().value()!==e))}_setGroupInterval(e){this.mute(!0),(0,n.ensureNotNull)(this._chartWidgetCollection).setResolution(e,this._groupIndex).finally((()=>{if(this._boundChartWidget){const t=this._boundChartWidget.resolutionWV().value();o.Interval.isEqual(t,e)||this.watchedInterval.setValue(t)}})),this.mute(!1)}_needApplyInterval(e){return this._chartsForLock(1).some((t=>!o.Interval.isEqual(t.resolutionWV().value(),e)))}}const p=new class{constructor(){this._watchedSymbol=new r.WatchedValue,this._seriesShortSymbol=new r.WatchedValue,this._proSymbol=new r.WatchedValue,this._ensuredProSymbol=new r.WatchedValue,this._watchedInterval=new r.WatchedValue,this._watchedIntraday=new r.WatchedValue,this._watchedSeconds=new r.WatchedValue,this._watchedTicks=new r.WatchedValue,this._watchedDataFrequencyResolution=new r.WatchedValue,this._watchedRange=new r.WatchedValue,this._watchedSupportedResolutions=new r.WatchedValue,this._watchedSupportedChartStyles=new r.WatchedValue([]),this._symbolNamesList=new r.WatchedValue,this._chartWidgetCollection=null,this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0,this._linkingGroups=new Map,this._activeLinkingGroup=new r.WatchedValue,this._activeLinkingGroupIndex=null,this._updateLinkingGroups=()=>{(0,n.ensureNotNull)(this._chartWidgetCollection).allLinkingGroups().value().forEach((e=>this._linkingGroup(e))),this._linkingGroups.forEach((e=>e.updateBoundChartWidget()))},this._activeLinkingGroup.setValue(this._linkingGroup(null));const e=(e,t)=>{e.subscribe((e=>t().setValue(e)),{callWithLast:!0})};e(this._watchedSymbol,(()=>this._activeLinkingGroup.value().watchedSymbol)),e(this._seriesShortSymbol,(()=>this._activeLinkingGroup.value().seriesShortSymbol)),e(this._proSymbol,(()=>this._activeLinkingGroup.value().proSymbol)),e(this._ensuredProSymbol,(()=>this._activeLinkingGroup.value().ensuredProSymbol)),e(this._watchedInterval,(()=>this._activeLinkingGroup.value().watchedInterval)),e(this._watchedIntraday,(()=>this._activeLinkingGroup.value().watchedIntraday)),e(this._watchedSeconds,(()=>this._activeLinkingGroup.value().watchedSeconds)),e(this._watchedTicks,(()=>this._activeLinkingGroup.value().watchedTicks)),e(this._watchedDataFrequencyResolution,(()=>this._activeLinkingGroup.value().watchedDataFrequencyResolution)),
e(this._watchedRange,(()=>this._activeLinkingGroup.value().watchedRange)),e(this._watchedSupportedResolutions,(()=>this._activeLinkingGroup.value().watchedSupportedResolutions)),e(this._watchedSupportedChartStyles,(()=>this._activeLinkingGroup.value().watchedSupportedChartStyles)),e(this._symbolNamesList,(()=>this._activeLinkingGroup.value().symbolNamesList));const t=e=>{this._watchedSymbol.setValue(e.watchedSymbol.value()),this._seriesShortSymbol.setValue(e.seriesShortSymbol.value()),this._proSymbol.setValue(e.proSymbol.value()),this._ensuredProSymbol.setValue(e.ensuredProSymbol.value()),this._watchedInterval.setValue(e.watchedInterval.value()),this._watchedIntraday.setValue(e.watchedIntraday.value()),this._watchedSeconds.setValue(e.watchedSeconds.value()),this._watchedTicks.setValue(e.watchedTicks.value()),this._watchedDataFrequencyResolution.setValue(e.watchedDataFrequencyResolution.value()),this._watchedRange.setValue(e.watchedRange.value()),this._watchedSupportedResolutions.setValue(e.watchedSupportedResolutions.value()),this._watchedSupportedChartStyles.setValue(e.watchedSupportedChartStyles.value()),this._symbolNamesList.setValue(e.symbolNamesList.value())};this._activeLinkingGroup.subscribe(t),t(this._activeLinkingGroup.value()),(0,m.setMuteLinkingGroup)(((e,t)=>{this._linkingGroup(e).mute(t)}))}get symbol(){return this._watchedSymbol}get proSymbol(){return this._proSymbol.readonly()}get ensuredProSymbol(){return this._ensuredProSymbol.readonly()}get symbolNamesList(){return this._symbolNamesList.readonly()}get seriesShortSymbol(){return this._seriesShortSymbol.readonly()}get interval(){return this._watchedInterval}get intraday(){return this._watchedIntraday.readonly()}get seconds(){return this._watchedSeconds.readonly()}get ticks(){return this._watchedTicks.readonly()}get range(){return this._watchedRange.readonly()}get supportedResolutions(){return this._watchedSupportedResolutions.readonly()}get supportedChartStyles(){return this._watchedSupportedChartStyles.readonly()}get preventFeedBySymbol(){return this._preventFeedBySymbol}get dataFrequencyResolution(){return this._watchedDataFrequencyResolution.readonly()}activeLinkingGroup(){return this._activeLinkingGroup.readonly()}getChartWidget(){return this.activeLinkingGroup().value().boundChartWidget()}bindToChartWidgetCollection(e){this._chartWidgetCollection?.onAboutToBeDestroyed.unsubscribeAll(this),this._unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(this,this._unbindFromChartWidgetCollection),this._chartWidgetCollection.allLinkingGroups().subscribe(this._updateLinkingGroups),this._updateLinkingGroups(),this._activeLinkingGroupIndex=e.activeLinkingGroup().spawn(),this._activeLinkingGroupIndex.subscribe((e=>{this._activeLinkingGroup.setValue(this._linkingGroup(e))}),{callWithLast:!0}),this._linkingGroups.forEach((t=>t.bindToChartWidgetCollection(e)))}bindToSearchCharts(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),
e.loadingSymbol.subscribe((e=>{!1===e&&(this._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)}unbindFromSearchCharts(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)}setPreventFeedBySymbol(e){this._preventFeedBySymbol=e}setSymbolAndLogInitiator(e,t,s){(this.symbol.value()!==e||s)&&(_.logInfo(`Change linking symbol to ${e}, initiator: ${t}`),this.symbol.setValue(e,s))}_onSearchBySymbol(e){if(!e.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1}_onSymbolLink(e){if(!this._selfEmit){if(!this._searchCharts){const e="No search charts defined";throw _.logError(e),new Error(e)}this._preventFeedBySymbol||this._loadSearchCharts(e)}}_loadSearchCharts(e){if(!this._searchCharts){const e="No search charts defined";throw _.logError(e),new Error(e)}if(this._searchChartsLoadDebounced)return void(this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(e)));const t=e=>this._searchCharts?(!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,i.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchChartsLoadDebounced=null,this._searchCharts.feedBySymbol.call(this._searchCharts,e)):()=>{};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,i.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchCharts.feedBySymbol(e)}_linkingGroup(e){let t=this._linkingGroups.get(e);if(void 0===t){const s={watchedSymbol:this._watchedSymbol,seriesShortSymbol:this._seriesShortSymbol,proSymbol:this._proSymbol,ensuredProSymbol:this._ensuredProSymbol,watchedInterval:this._watchedInterval,watchedIntraday:this._watchedIntraday,watchedSeconds:this._watchedSeconds,watchedTicks:this._watchedTicks,watchedDataFrequencyResolution:this._watchedDataFrequencyResolution,watchedRange:this._watchedRange,watchedSupportedResolutions:this._watchedSupportedResolutions,watchedSupportedChartStyles:this._watchedSupportedChartStyles,symbolNamesList:this._symbolNamesList};t=new b(e,s,(()=>this._activeLinkingGroup.value())),this._linkingGroups.set(e,t),this._chartWidgetCollection&&t.bindToChartWidgetCollection(this._chartWidgetCollection)}return t}_unbindFromChartWidgetCollection(){null!==this._chartWidgetCollection&&(this._activeLinkingGroupIndex?.destroy(),this._activeLinkingGroupIndex=null,this._linkingGroups.forEach((e=>e.unbindFromChartWidgetCollection())),this._chartWidgetCollection.allLinkingGroups().unsubscribe(this._updateLinkingGroups),this._chartWidgetCollection=null)}};{const e=(0,h.getFreshInitData)().symbolInfo,t=e?e.pro_symbol:u.getValue("editchart.model.symbol",window.DEFAULT_SYMBOL);p.setSymbolAndLogInitiator(t,"initial data")}
window.TradingViewApi||(window.TradingViewApi={linking:p})},912445:(e,t,s)=>{let i;function n(e,t){i?.(e,t)}function r(e){i=e}s.d(t,{muteLinkingGroup:()=>n,setMuteLinkingGroup:()=>r})},440498:(e,t,s)=>{s.r(t),s.d(t,{DELETED_SYMBOLS_LIST_ID:()=>a,DeletedSymbolsList:()=>h,isDeletedSymbolsList:()=>u});var i=s(49437),n=s(738600);const r="deleted_symbols_list",o="is_deleted_symbols_list_active",a="deleted_symbols_list_id",l="There was an error during attempt to set local storage value",u=e=>e===a;class h{constructor(){this._logError=(e,t)=>{e instanceof Error?n.logger.logError(e.message):n.logger.logError(t)}}createList(e){this._setList(e)}removeList(){try{i.TVLocalStorage.removeItem(r)}catch(e){this._logError(e,"There was an error during local storage item removal")}}addSymbols(e){const t=this.getList();if(!t)return;const s=new Set(t.symbols);for(const t of e)s.add(t);const i=Array.from(s);i.length>100?t.symbols=i.reverse().slice(0,100).reverse():t.symbols=i,this._setList(t)}removeSymbols(e){const t=this.getList();if(!t)return;const s=new Set(t.symbols);for(const t of e)s.delete(t);t.symbols=Array.from(s),this._setList(t)}replaceSymbols(e){const t=this.getList();t&&(t.symbols=e,this._setList(t))}getIsActive(){try{return"true"===i.TVLocalStorage.getItem(o)}catch(e){return this._logError(e,l),!1}}setIsActive(e){try{i.TVLocalStorage.setItem(o,String(e))}catch(e){this._logError(e,l)}}getList(){try{const e=i.TVLocalStorage.getItem(r);return e?JSON.parse(e):null}catch(e){return this._logError(e,"There was an error during attempt to get local storage value"),null}}_setList(e){try{i.TVLocalStorage.setItem(r,JSON.stringify(e))}catch(e){this._logError(e,l)}}}},738600:(e,t,s)=>{s.d(t,{logger:()=>i});const i=(0,s(735566).getLogger)("Platform.Model.Watchlist")},68777:(e,t,s)=>{s.d(t,{accumulate:()=>a,combine:()=>o,combineWithFilteredUpdate:()=>r});var i=s(820028);function n(e,t,...s){let n=null;const r=(...t)=>e(...t.map((e=>e.value())),n?.value()),o=n=new i.WatchedValue(r(...s)),a=()=>{const e=s.map(((e,t)=>e.value()));t(...e)&&o.setValue(r(...s))},l=s.map((e=>e.spawn()));for(const e of l)e.subscribe(a);return o.readonly().spawn((()=>{l.forEach((e=>e.destroy())),s.forEach((e=>e.release()))}))}function r(e,t,...s){return n(e,t,...s)}function o(e,...t){return n(e,(()=>!0),...t)}function a(e,t,s){let n=null;const r=(t,i)=>{const r=t.map((e=>e.value())),o=s?[i,n?.value()]:[n?.value()];return e(r,...o)},o=n=new i.WatchedValue(r(t.value(),s?.value())),a=t.spawn();let l=[];const u=s?.spawn()??new i.WatchedValue(void 0),h=()=>{o.setValue(r(l,u.value()))},c=e=>{l.forEach((e=>e.destroy())),l=e.map((e=>e.spawn())),l.forEach((e=>{e.subscribe(h)})),h()};c(a.value()),a.subscribe(c),u.subscribe(h);return o.readonly().spawn((()=>{l.forEach((e=>e.destroy())),a.destroy(),u.destroy(),t.release()}))}},862150:(e,t,s)=>{function i(e){const t=Object.create(e);return t.release=()=>{},t.ownership=()=>t,t}function n(e){const t=e;return t.release=()=>t.destroy(),t.ownership=()=>t,t}s.d(t,{ownership:()=>n,weakReference:()=>i})},291066:(e,t,s)=>{s.d(t,{
isCFDSymbol:()=>n,isCryptoSymbol:()=>u,isFuturesSymbol:()=>o,isIndexSymbol:()=>l,isNDFSymbol:()=>r,isStockSymbol:()=>a});const i=["commodity","futures","index","stock","fund"];function n(e,t){return!!t?.includes("cfd")&&["commodity","futures","index","stock","fund"].includes(e)}function r(e,t){return i.includes(e)&&(t?.includes("ndf")??!1)}function o(e,t){return"futures"===e&&void 0!==t&&!t.includes("cfd")&&!t.includes("ndf")}function a(e,t){return"stock"===e&&void 0!==t&&!t.includes("cfd")&&!t.includes("ndf")}function l(e,t){return void 0!==t&&("index"===e&&!t.includes("cfd")&&!t.includes("ndf")||"fundamental"===e&&t.includes("crypto"))}function u(e){return void 0!==e&&e.includes("crypto")}},296538:(e,t,s)=>{s.d(t,{allChartStyles:()=>r});var i=s(213377);const n=(0,s(638456).onWidget)();function r(){return function(){const e=[0,1,9,13,2,14,15,3,16,10];return e.push(12),n||e.push(17),n||e.push(18),n||e.push(20),n||e.push(19),e}().concat(function(){const e=[8];return i.enabled("japanese_chart_styles")&&(e.push(4,7,5,6),e.push(11)),e}())}},477786:(e,t,s)=>{s.d(t,{Interval:()=>h,ResolutionKind:()=>r,SpecialResolutionKind:()=>o,isHour:()=>d});const i=/^(\d*)([TSHDWMR])$/,n=/^(\d+)$/;var r,o;!function(e){e.Ticks="ticks",e.Seconds="seconds",e.Minutes="minutes",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(r||(r={})),function(e){e.Hours="hours"}(o||(o={}));const a={};a[r.Ticks]=1e3,a[r.Seconds]=1e3,a[r.Minutes]=60*a[r.Seconds],a[r.Days]=1440*a[r.Minutes],a[r.Weeks]=7*a[r.Days];const l={T:r.Ticks,S:r.Seconds,D:r.Days,W:r.Weeks,M:r.Months,R:r.Range},u=new Set([r.Ticks,r.Seconds,r.Minutes]);class h{constructor(e,t){this._kind=r.Invalid,this._multiplier=0,e!==r.Invalid&&t>0&&(this._kind=e,this._multiplier=t)}kind(){return this._kind}guiKind(){return this.isMinuteHours()?o.Hours:this._kind}multiplier(){return this._multiplier}isValid(){return this.kind()!==r.Invalid&&this.multiplier()>0}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isIntraday(){const e=u.has(this.kind());return this.isValid()&&e}isSeconds(){return this.kind()===r.Seconds}isMinutes(){return this.kind()===r.Minutes}isMinuteHours(){return this.kind()===r.Minutes&&d(this.multiplier())}isDays(){return this.kind()===r.Days}isWeeks(){return this.kind()===r.Weeks}isMonths(){return this.kind()===r.Months}isRange(){return this.kind()===r.Range}isTicks(){return this.kind()===r.Ticks}is1Tick(){return this.isTicks()&&1===this.multiplier()}isTimeBased(){return!this.isRange()}letter(){return this.isValid()&&this.kind()!==r.Minutes?this.kind()[0].toUpperCase():""}value(){return this.isValid()?this.kind()===r.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""}isEqualTo(e){if(!(e instanceof h))throw new Error("Argument is not an Interval");return!(!this.isValid()||!e.isValid())&&(this.kind()===e.kind()&&this.multiplier()===e.multiplier())}inMilliseconds(e=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const t=new Date(e)
;t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1));return+t-e}const t=this.multiplier();return a[this.kind()]*t}static isEqual(e,t){return e===t||h.parse(e).isEqualTo(h.parse(t))}static parseExt(e){e=(e+"").toUpperCase().split(",")[0];let t=i.exec(e);return null!==t?"H"===t[2]?{interval:new h(r.Minutes,60*c(t[1])),guiResolutionKind:o.Hours}:{interval:new h(l[t[2]],c(t[1])),guiResolutionKind:l[t[2]]}:(t=n.exec(e),null!==t?{interval:new h(r.Minutes,c(t[1])),guiResolutionKind:r.Minutes}:{interval:new h(r.Invalid,0),guiResolutionKind:r.Invalid})}static parse(e){return h.parseExt(e).interval}static kind(e){return h.parse(e).kind()}static isValid(e){return h.parse(e).isValid()}static isDWM(e){return h.parse(e).isDWM()}static isIntraday(e){return h.parse(e).isIntraday()}static isSeconds(e){return h.parse(e).isSeconds()}static isMinutes(e){return h.parse(e).isMinutes()}static isMinuteHours(e){return h.parse(e).isMinuteHours()}static isDays(e){return h.parse(e).isDays()}static isWeeks(e){return h.parse(e).isWeeks()}static isMonths(e){return h.parse(e).isMonths()}static isRange(e){return h.parse(e).isRange()}static isTicks(e){return h.parse(e).isTicks()}static isTimeBased(e){return h.parse(e).isTimeBased()}static normalize(e){const t=h.parse(e);return t.isValid()?t.value():null}}function c(e){return 0===e.length?1:parseInt(e,10)}function d(e){return e>=60&&!(e%60)}},781567:(e,t,s)=>{s.d(t,{createPrimitiveProperty:()=>n});var i=s(905520);function n(e){return new i.Property(e)}},421566:(e,t,s)=>{s.d(t,{PropertyBase:()=>r});var i=s(650151),n=s(547465);class r{constructor(){this._listeners=new n.Delegate,this._muteChildChanges=!1,this._owner=null,this._name=""}nameInOwner(){return this._name}setNameInOwner(e){this._name=e}owner(){return this._owner}setOwner(e){this._owner=e}pathToRoot(){const e=this._owner?.pathToRoot();return e?`${e}.${this._name}`:this._name}pathToRootProperty(){if(!this._owner)return"";const e=this._owner.pathToRootProperty?.();return e?`${e}.${this._name}`:this._name}removeProperty(e){(0,i.assert)(!1,`Trying to call "removeProperty" on property ${this.pathToRoot()}`)}addChild(e,t){(0,i.assert)(!1,`Trying to call "addChild" on property ${this.pathToRoot()}`)}hasChild(e){return!1}childCount(){return 0}childNames(){return[]}childs(){(0,i.assert)(!1,`Trying to call "childs" on property ${this.pathToRoot()}`)}state(e,t){return this.value()}merge(e,t){(0,i.assert)(!1,`Trying to call "merge" on property ${this.pathToRoot()}`)}mergeAndFire(e){(0,i.assert)(!1,`Trying to call "mergeAndFire" on property ${this.pathToRoot()}`)}child(e){if(this.hasChild(e))return this.childs()[e]}muteChildChanges(e){this._muteChildChanges=e}fireChanged(){this._listeners.fire(this,this.pathToRootProperty())}listeners(){return this._listeners}subscribe(e,t){this.listeners().subscribe(e,t,!1)}unsubscribe(e,t){this.listeners().unsubscribe(e,t)}unsubscribeAll(e){this.listeners().unsubscribeAll(e)}}},690370:(e,t,s)=>{s.d(t,{DataTypes:()=>i,createPropertySchema:()=>y,dataType:()=>h,extractStateWithSchema:()=>m,isArraySchema:()=>d,
validateSchema:()=>c});var i,n=s(569708),r=s(283873),o=s(683350),a=s(456052),l=s(182433),u=s(936714);function h(e){return(0,n.default)(e)?i.NUMBER:(0,r.default)(e)?i.STRING:(0,o.default)(e)?i.BOOLEAN:(0,a.default)(e)?i.ARRAY:null===e?i.UNKNOWN:"object"==typeof e?i.OBJECT:i.UNKNOWN}function c(e,t){const s=h(e);switch(t.type){case i.ARRAY:return s===i.ARRAY&&e.every((e=>c(e,t.subschema)));case i.OBJECT:{if(s!==i.OBJECT)return!1;const n=Object.entries(t.subschema);for(const t of n)if(!c(e[t[0]],t[1]))return!1;return!0}default:return s===t.type||t.type===i.UNKNOWN}}function d(e){return e.type===i.ARRAY}function y(e,t){let s;const n=h(e);switch(n){case i.NUMBER:case i.STRING:case i.BOOLEAN:s={type:n,saveFlags:t};break;case i.ARRAY:s={type:i.ARRAY,saveFlags:t,subschema:y(e[0],t)};break;case i.OBJECT:{const n={};for(const[s,i]of Object.entries(e))n[s]=y(i,t);s={type:i.OBJECT,saveFlags:t,subschema:n};break}default:s={type:i.UNKNOWN,saveFlags:t}}return s}function m(e,t,s){if(!function(e){return e.type===i.OBJECT}(t)||!(0,l.default)(e))return e;const n=Object.keys(e);for(const i of n){const n=t.subschema[i];void 0===t.saveFlags||n||(0,u.default)(e,i);const r=n?.saveFlags;void 0===r||r&s||(0,u.default)(e,i),n&&m(e[i],n,s)}return e}!function(e){e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.OBJECT="object",e.ARRAY="array",e.UNKNOWN="unknown"}(i||(i={}))},506649:(e,t,s)=>{s.d(t,{combineProperty:()=>n});var i=s(781567);function n(e,...t){const s=()=>e(...t.map((e=>e.value()))),n=(0,i.createPrimitiveProperty)(s()),r=()=>n.setValue(s()),o={};for(const e of t)e.subscribe(o,r);return n.destroy=()=>{t.forEach((e=>e.unsubscribeAll(o))),t.forEach((e=>e.release()))},n}},524503:(e,t,s)=>{s.d(t,{createPrimitivePropertyFromGetterAndSubscription:()=>n});var i=s(781567);function n(e,t){const s=(0,i.createPrimitiveProperty)(e()),n={};return s.destroy=()=>{t.unsubscribeAll(n)},t.subscribe(n,(()=>{s.setValue(e())})),s}},185419:(e,t,s)=>{s.d(t,{combineProperty:()=>a.combineProperty,createPrimitivePropertyFromGetterAndSubscription:()=>o.createPrimitivePropertyFromGetterAndSubscription,createWVFromGetterAndSubscription:()=>i.createWVFromGetterAndSubscription,createWVFromGetterAndSubscriptions:()=>n.createWVFromGetterAndSubscriptions,createWVFromProperty:()=>r.createWVFromProperty});var i=s(900210),n=s(582441),r=s(720727),o=s(524503),a=s(506649)},900210:(e,t,s)=>{s.d(t,{createWVFromGetterAndSubscription:()=>n});var i=s(820028);function n(e,t){const s=new i.WatchedValue(e()),n={};t.subscribe(n,(()=>{s.setValue(e())}));return s.readonly().spawn((()=>t.unsubscribeAll(n)))}},582441:(e,t,s)=>{s.d(t,{createWVFromGetterAndSubscriptions:()=>n});var i=s(820028);function n(e,t){const s=new i.WatchedValue(e()),n={};t.forEach((t=>t.subscribe(n,(()=>{s.setValue(e())}))));return s.readonly().spawn((()=>t.forEach((e=>e.unsubscribeAll(n)))))}},720727:(e,t,s)=>{s.d(t,{createWVFromProperty:()=>n});var i=s(900210);function n(e){return(0,i.createWVFromGetterAndSubscription)((()=>e.value()),e)}},905520:(e,t,s)=>{s.d(t,{Property:()=>_,isPrimitiveType:()=>m})
;var i=s(569708),n=s(283873),r=s(683350),o=s(688987),a=s(456052),l=s(650151),u=s(735566),h=s(862150),c=s(421566),d=s(690370);const y=(0,u.getLogger)("Property");function m(e){return null===e||(0,i.default)(e)&&Number.isFinite(e)||(0,n.default)(e)||(0,r.default)(e)}class _ extends c.PropertyBase{constructor(e,t){if(super(),this._childs=[],this._dependents=[],this._schema=t||(0,d.createPropertySchema)(e),void 0!==e)if((0,d.validateSchema)(e,this._schema)||y.logWarn(`The state with a data type: ${(0,d.dataType)(e)} does not match a schema`),m(e))this._value=e;else{let t=Object.entries(e);(0,d.isArraySchema)(this._schema)&&(t=t.filter((([e])=>!Number.isNaN(+e))));for(const[e,s]of t)this.addProperty(e,s)}}destroy(){this.listeners().destroy();for(const e of this._childs)this.child(e)?.destroy?.()}merge(e,t){let s=null,i=0;if(t&&(s=[],i=s.length),void 0===e)return s;if(m(e))return this._value!==e&&s?.push(this),this._value=e,s;if((0,a.default)(e)){(0,d.isArraySchema)(this._schema)||y.logWarn("Property is not an array");for(let i=0;i<e.length;i++){const n=this.childs()[i];if(n){const r=n.merge(e[i],t);s?.push(...r)}else{const t=this.addProperty(`${i}`,e[i]);s?.push(t)}}}else{let i=Object.entries(e);(0,d.isArraySchema)(this._schema)&&(i=i.filter((([e])=>!Number.isNaN(+e))));for(const[e,n]of i){const i=this.childs()[e];if(i){const e=i.merge(n,t);s?.push(...e)}else{const t=this.addProperty(e,n);s?.push(t)}}}return s&&s.length>i&&s.push(this),s}mergeAndFire(e){const t=(0,l.ensureNotNull)(this.merge(e,!0));this._fireMergeAndFireChangedProps(t)}state(e,t){const s=(0,o.default)(this.value)?this.value():void 0;if(void 0!==s)return s;const i=(0,d.isArraySchema)(this._schema)?[]:{};for(const s of this._childs){if(e&&-1!==e.indexOf(s))continue;if((0,d.isArraySchema)(this._schema)&&Number.isNaN(+s))continue;if(void 0!==t&&"subschema"in this._schema){const e=(0,d.isArraySchema)(this._schema)?this._schema.subschema:this._schema.subschema[s];if(void 0!==this._schema.saveFlags&&!e)continue;if(void 0!==e?.saveFlags&&!(e.saveFlags&t))continue}const n=this.childs()[s];let r;if(e){const i=[];for(const t of e)t.startsWith(s+".")&&i.push(t.substring(s.length+1));r=n?.state(i,t)}else r=n?.state();(void 0!==r||n?.storeStateIfUndefined())&&((0,a.default)(i)?i[+s]=r:i[s]=r)}return i}clone(){return new _(this.state())}value(){return this._value}childCount(){return this._childs.length}childNames(){return this._childs}childByPath(e){let t=this;for(const s of e.split(".")){if(void 0===t)break;t=t.child(s)}return t}hasChild(e){return this._childs.includes(e)}setValue(e,t){(this._value!==e||t)&&(this._value=e,this.fireChanged())}setValueSilently(e){this._value=e}addProperty(e,t){let s;(0,d.isArraySchema)(this._schema)&&Number.isNaN(+e)&&y.logWarn("Property is an array"),this.removeProperty(e),this._schema.type===d.DataTypes.OBJECT?s=this._schema.subschema[e]:this._schema.type===d.DataTypes.ARRAY&&(s=this._schema.subschema);const i=new _(t,s);return this[e]=i,this._childs.push(e),i.subscribe(this,((e,t)=>{this._childChanged(e,t)})),i.setOwner(this),
i.setNameInOwner(e),i}removeProperty(e){const t=this.child(e);t&&(t.setNameInOwner(""),t.setOwner(null),t.unsubscribeAll(this),delete this[e],this._childs=this._childs.filter((t=>t!==e)))}addChild(e,t){if((0,d.isArraySchema)(this._schema)&&Number.isNaN(+e))throw new Error("Property is an array");this[e]&&this.removeProperty(e),this[e]=t,-1===this._childs.indexOf(e)&&this._childs.push(e),t.subscribe(this,((e,t)=>this._childChanged(e,t))),t.setOwner(this),t.setNameInOwner(e)}childs(){return this}storeStateIfUndefined(){return!0}ownership(){return(0,h.ownership)(this)}weakReference(){return(0,h.weakReference)(this)}addDependent(e){this._dependents.push(e)}removeDependent(e){const t=this._dependents.indexOf(e);t>=0&&this._dependents.splice(t,1)}dependents(){return this._dependents}_childChanged(e,t){this._muteChildChanges||this._listeners.fire(this,t)}_fireMergeAndFireChangedProps(e){this.muteChildChanges(!0);for(const t of e)t.muteChildChanges(!0);for(const t of e)t.muteChildChanges(!1),t.fireChanged();this.muteChildChanges(!1)}}},218778:(e,t,s)=>{function i(e){if(!e)return"";if(["NYSE ARCA & MKT","AMEX"].includes(e))return"NYSE Arca";if(["Cboe BZX"].includes(e))return"Cboe One";if(["FTSEST"].includes(e))return"FTSE ST";const t=/^(CME|COMEX|CBOT|NYMEX)_MINI$/.exec(e);return null!==t?t[1]:e}s.d(t,{redefineExchangeName:()=>i})},870855:(e,t,s)=>{s.r(t),s.d(t,{SERIES_STATUS_TEXT:()=>v,STATUS_CALCULATION_ERROR:()=>b,STATUS_DELAYED:()=>c,STATUS_DELAYED_STREAMING:()=>d,STATUS_EOD:()=>u,STATUS_ERROR:()=>_,STATUS_INVALID_SYMBOL:()=>a,STATUS_LOADING:()=>r,STATUS_NO_BARS:()=>y,STATUS_OFFLINE:()=>i,STATUS_PULSE:()=>h,STATUS_READY:()=>o,STATUS_REPLAY:()=>m,STATUS_RESOLVING:()=>n,STATUS_SNAPSHOT:()=>l,STATUS_UNSUPPORTED_RESOLUTION:()=>p,STYLE_AREA:()=>k,STYLE_BARS:()=>f,STYLE_BASELINE:()=>A,STYLE_CANDLES:()=>w,STYLE_COLUMNS:()=>B,STYLE_HEIKEN_ASHI:()=>V,STYLE_HILO:()=>N,STYLE_HLC_AREA:()=>P,STYLE_HLC_BARS:()=>M,STYLE_HOLLOW_CANDLES:()=>E,STYLE_KAGI:()=>W,STYLE_LINE:()=>C,STYLE_LINE_WITH_MARKERS:()=>G,STYLE_PB:()=>I,STYLE_PNF:()=>L,STYLE_RANGE:()=>R,STYLE_RENKO:()=>T,STYLE_SHORT_NAMES:()=>D,STYLE_STEPLINE:()=>F,SYMBOL_STRING_DATA:()=>O,chartStylesWithAttachedStudies:()=>U,seriesLoadingStatuses:()=>g,seriesReadyStatuses:()=>S});const i=0,n=1,r=2,o=3,a=4,l=5,u=6,h=7,c=8,d=9,y=10,m=11,_=12,b=13,p=14,S=new Set([3,6,7,8,9,11]),g=new Set([1,2]),v={[i]:"connecting",[n]:"loading",[r]:"loading",[o]:"realtime",[a]:"invalid",[l]:"snapshot",[u]:"endofday",[h]:"endofday",[c]:"delayed",[d]:"delayed_streaming",[y]:"forbidden",[m]:"replay",[_]:"error",[b]:"calculation_error",[p]:"unsupported_resolution"},f=0,w=1,C=2,k=3,T=4,W=5,L=6,I=7,V=8,E=9,A=10,R=11,N=12,B=13,G=14,F=15,P=16,M=21,D={0:"bar",1:"candle",9:"hollowCandle",2:"line",14:"lineWithMarkers",15:"stepline",3:"area",16:"hlcArea",4:"renko",7:"pb",5:"kagi",6:"pnf",8:"ha",10:"baseline",11:"range",12:"hilo",13:"column",17:"volFootprint",18:"tpo",19:"volCandles",20:"svp",21:"hlcBars"},O={4:{type:"BarSetRenko@tv-prostudies",basicStudyVersion:73},7:{type:"BarSetPriceBreak@tv-prostudies",
basicStudyVersion:34},5:{type:"BarSetKagi@tv-prostudies",basicStudyVersion:73},6:{type:"BarSetPnF@tv-prostudies",basicStudyVersion:73},8:{type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},11:{type:"BarSetRange@tv-basicstudies",basicStudyVersion:72},17:{type:"Footprint@tv-volumebyprice",basicStudyVersion:104},18:{type:"TPOPeriodic@tv-volumebyprice",basicStudyVersion:104},20:{type:"VbPSessions@tv-volumebyprice",basicStudyVersion:126}},U=[17,18,20]},388741:(e,t,s)=>{s.d(t,{actualSymbol:()=>be,chartStyleStudyId:()=>Y,createSeriesFormatter:()=>K,displayedSymbolExchange:()=>_e,displayedSymbolName:()=>me,extractLineToolSymbolFromSymbolInfo:()=>ue,extractSymbolNameFromSymbolInfo:()=>le,getChartStyleByResolution:()=>x,getDefaultStyle:()=>U,getLastUsedRawDataStyle:()=>O,getLastUsedSingleValueBasedStyle:()=>D,getLastUsedStyle:()=>M,getSeriesDisplayErrorWV:()=>Ie,getSeriesPriceFormattingState:()=>$,getSourceForEconomySymbol:()=>de,getSymbolDelaySeconds:()=>Ve,getSymbolExchange:()=>Te,getTranslatedChartStyleName:()=>W,hasVolume:()=>we,isCloseBasedSymbol:()=>ge,isConvertedToOtherCurrency:()=>Z,isConvertedToOtherUnit:()=>se,isEconomicSymbol:()=>Ce,isFutureContinuousSymbolWithBackajustment:()=>We,isFuturesContractSymbol:()=>Le,isMeasureUnitSymbol:()=>ve,isPriceSourceStyle:()=>q,isRangeBasedStyle:()=>I,isRangeStyle:()=>E,isRawDataStyle:()=>G,isRegularSessionId:()=>Se,isRequiringRestartSeriesStyles:()=>L,isSingleValueBasedStyle:()=>B,isSpreadSymbolWithManyLegs:()=>ke,isStyleSupportedForReplay:()=>R,isTimeBasedStyle:()=>A,isValidStyle:()=>N,measureUnitId:()=>fe,preparePriceAxisProperties:()=>H,proSymbol:()=>pe,setLastUsedRawDataStyle:()=>P,setLastUsedStyle:()=>F,styleChangeRequiresRestart:()=>V,symbolBaseCurrency:()=>X,symbolCurrency:()=>J,symbolCurrencyConvertible:()=>j,symbolHasEconomicEvents:()=>ae,symbolHasElectronicSession:()=>re,symbolHasPreOrPostMarket:()=>ne,symbolHasSeveralSessions:()=>oe,symbolOriginalCurrency:()=>z,symbolOriginalUnit:()=>te,symbolTitle:()=>ye,symbolTitleSeparator:()=>ce,symbolToSaveInState:()=>he,symbolUnit:()=>ee,symbolUnitConvertibleGroupsIfExist:()=>ie});var i=s(444372),n=s(62802),r=s(638456),o=s(519073),a=s(870855),l=s(477786),u=s(220129),h=s(213377),c=s(51196),d=s(722652),y=s(291066),m=s(68777),_=s(185419),b=s(218778);const p=h.enabled("pay_attention_to_ticker_not_symbol"),S=h.enabled("uppercase_instrument_names"),g=h.enabled("charting_library_single_symbol_request"),v=h.enabled("use_ticker_on_symbol_info_update"),f=h.enabled("hide_object_tree_and_price_scale_exchange_label"),w=[4,5,6,7,8],C=[4,5,6,7,11],k=[0,1,9,19,2,14,15,3,16,10,8,12,13,18,17,20],T=[2,14,15,10,3,13,18];function W(e){return{0:i.t(null,void 0,s(527377)),1:i.t(null,void 0,s(745054)),2:i.t(null,void 0,s(903554)),14:i.t(null,void 0,s(409394)),15:i.t(null,void 0,s(869217)),3:i.t(null,void 0,s(534456)),16:i.t(null,void 0,s(99906)),9:i.t(null,void 0,s(913459)),10:i.t(null,void 0,s(259213)),12:i.t(null,void 0,s(498236)),13:i.t(null,void 0,s(655761)),4:i.t(null,void 0,s(188130)),7:i.t(null,void 0,s(743588)),
5:i.t(null,void 0,s(383490)),6:i.t(null,void 0,s(276519)),11:i.t(null,void 0,s(855169)),8:i.t(null,void 0,s(863876)),17:i.t(null,void 0,s(292763)),18:i.t(null,void 0,s(617809)),19:i.t(null,void 0,s(193722)),20:i.t(null,void 0,s(383298)),21:i.t(null,void 0,s(800886))}[e]}function L(e){return-1!==w.indexOf(e)}function I(e){return-1!==C.indexOf(e)}function V(e,t){return!E(e)&&!E(t)&&!(e===t||!L(e)&&!L(t))}function E(e){return 11===e}function A(e){return-1!==k.indexOf(e)}function R(e){return 8!==e&&17!==e&&18!==e&&20!==e&&A(e)}function N(e){return I(e)||A(e)}function B(e){switch(e){case 3:case 10:case 2:case 14:case 15:case 13:return!0;default:return!1}}function G(e){return!a.SYMBOL_STRING_DATA[e]}function F(e,t){N(e)&&(11!==e&&n.setValue("chart.lastUsedStyle",e),G(e)&&P(e),ge(t)&&B(e)&&n.setValue("chart.lastUsedSingleValueBasedStyle",e))}function P(e){n.setValue("chart.rawDataStyle",e)}function M(){const e=n.getInt("chart.lastUsedStyle");return void 0===e?1:e}function D(){const e=n.getInt("chart.lastUsedSingleValueBasedStyle");return void 0===e?14:e}function O(){return n.getInt("chart.rawDataStyle",1)}function U(e){return e?11:1}function x(e,t){const s=E(t),i=l.Interval.isRange(e);return!s&&i?U(!0):s&&!i?U(!1):t}function Y(e,t){const s=a.SYMBOL_STRING_DATA[e];return void 0===s?null:t?`${s.type}-${s.basicStudyVersion}`:s.type}function H(e){const t=e.priceAxisProperties,s=t.lockScale.value(),i=6===e.style.value();(i||s)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!i&&!s)),t.percentageDisabled.setValue(!(!i&&!s))}function q(e){return T.includes(e)}function $(e,t="default",s=!1){let i,n,r,o=100,a=1;if("default"===t)null!=e&&(({pricescale:o,minmov:a,minmove2:n,fractional:i}=e),r=e.variable_tick_size||void 0);else{let e=t.split(",");3!==e.length&&(e=["100","1","false"]),o=parseInt(e[0]),a=parseInt(e[1]),i="true"===e[2]}return s&&(a=1),{priceScale:o,minMove:a,fractional:i,minMove2:n,variableMinTick:r,ignoreMinMove:s}}function K(e,t,s=!1){const{priceScale:i,minMove:n,fractional:r,minMove2:o,variableMinTick:a}=$(e,t,s);if(null!=e){const l=e.format;if("default"===t&&"volume"===l)return new c.VolumeFormatter({precision:2});if("percent"===l)return new d.PercentageFormatter({priceScale:i,minMove:n,fractional:r,minMove2:o,variableMinTick:a,ignoreMinMove:s})}return new u.PriceFormatter({priceScale:i,minMove:n,fractional:r,minMove2:o,variableMinTick:a,ignoreMinMove:s})}function j(e){return null!==e&&!(0,o.isSpread)(e.type)}function J(e,t,s){if(null===e)return null;const i=!t||s?e.currency_id:e.currency_code;return void 0===i||""===i||"pct"===i?null:i}function z(e,t){const s=t?e.original_currency_code:e.original_currency_id;return"pct"===s?null:s??J(e,t)}function X(e){return e.base_currency_id||null}function Z(e){if(null===e||!j(e))return!1;const t=z(e);return null!==t&&t!==J(e)}function Q(e,t){return t&&null!==e&&!(0,o.isSpread)(e.type)}function ee(e,t){if(null===e||!t)return null;const s=e.unit_id;return void 0===s||""===s?null:s}function te(e,t){return t?e.original_unit_id||ee(e,t):null}function se(e,t){
return!(null===e||!Q(e,t))&&(void 0!==e.original_unit_id&&e.original_unit_id!==e.unit_id)}function ie(e,t){return null!==e&&Q(e,t)?e.unit_conversion_types||null:[]}function ne(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.some((e=>"premarket"===e.id||"postmarket"===e.id))}function re(e){return null!==e&&void 0!==e.subsessions&&(e.subsessions.some((e=>"regular"===e.id))&&e.subsessions.some((e=>"us_regular"===e.id)))}function oe(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.filter((e=>!e.private)).length>1}function ae(e){return null!==e&&((0,o.isForexSymbol)(e.type)||(0,y.isCFDSymbol)(e.type,e.typespecs)||(0,o.hasCryptoTypespec)(e.typespecs||[]))}function le(e,t,s,i){let n=e&&(s&&e.pro_name||e.full_name||e.name);return g&&t?n=t:(v||!i&&p)&&e&&e.ticker&&(n=e.ticker),S&&n&&(n=n.toUpperCase()),n}function ue(e,t){return le(e,null,!0,!0)||t}function he(e,t){return e?e.ticker??e.pro_name??t:t}const ce="·";function de(e,t){return Ce(e)?e.source2?.description??null:null}function ye(e,t,s="exchange"){const i=de(e)??e[s];return t||f?e.name:`${e.name} ${ce} ${i}`}function me(e){let t=e&&(function(e){return(0,o.isFutures)(e.type)&&e.front_contract||null}(e)||e.name)||"";return t.length>40&&(t=t.substring(0,37)+"..."),t.trim()}function _e(e){const t=e?e.exchange:"";return S?t.toUpperCase():t}function be(e,t){return null!==e?e.full_name:t}function pe(e,t){return e?.pro_name??t}function Se(e,t){return["stock","fund","index","dr"].includes(t.type)&&"regular"===e||(0,o.isFutures)(t.type)&&"us_regular"===e}function ge(e){return"c"===e?.visible_plots_set}function ve(e){return null!==e&&("unit"===e.measure&&null!==fe(e))}function fe(e){return e?.value_unit_id??null}function we(e){return"ohlcv"===e.visible_plots_set}function Ce(e){return null!==e&&(0,o.isEconomicSymbol)(e.type)}function ke(e){return function(e){return null!==e&&(0,o.isSpread)(e.type)}(e)&&(e?.legs??[]).length>1}function Te(e){const t=de(e);if(null!==t)return t;return(0,r.onWidget)()||(0,o.isForexSymbol)(e.type)?e.exchange:(0,b.redefineExchangeName)(e.listed_exchange)}function We(e){return null!==e&&(0,o.isFutures)(e.type)&&Boolean(e.has_backadjustment&&e.typespecs?.includes("continuous"))}function Le(e){return null!==e&&(0,o.isFutures)(e.type)&&!Boolean(e.typespecs?.includes("continuous"))}function Ie(e){return(0,m.combine)(((t,s)=>{switch(t){case 4:{const t=e.seriesErrorMessage();return null!==t&&("resolution_not_entitled"===t||"custom_resolution"===t||"seconds_not_entitled"===t||"ticks_not_entitled"===t||t.startsWith("study_not_auth:"))?null:{type:"invalid_symbol"}}case 13:{const t=e.seriesErrorMessage();return null===t?null:{type:"calculations_error",errorMessage:t}}case 14:{const t=e.unsupportedResolutionState().value();return null===t?null:{type:"unsupported_resolution",reason:t.reason}}case 1:case 2:return null;default:if(s)return{type:"no_data"}}return null}),e.statusWV().weakReference(),(0,_.createWVFromGetterAndSubscription)((()=>!e.bars().size()&&!e.isInReplay().value()),e.dataEvents().dataUpdated()).ownership())}function Ve(e){
return Math.max(0,e?.delay??0)}},388130:(e,t,s)=>{s.d(t,{DAYS_UNTIL_BLOCK:()=>r,UserStatus:()=>i,getDaysUntilBlock:()=>o,isUserLockedOut:()=>a});var i,n=s(336669);!function(e){e.NonPro="non_pro",e.Pro="pro"}(i||(i={}));const r=7,o=(0,n.memoize)((()=>{const e=window.user.declared_status_timestamp;if(!e)return null;const t=((new Date).getTime()-new Date(1e3*e).getTime())/1e3/24/60/60;return r-Math.floor(t)})),a=(0,n.memoize)((e=>{const t=e??o();return Boolean(null!==t&&t<=0)}))},904207:(e,t,s)=>{s.r(t),s.d(t,{getTranslatedSymbolDescription:()=>r});var i=s(444372);function n(e){const t=`#${e}-symbol-description`,n=i.t(t,void 0,s(956316));return n===t?null:n}function r(e){if(void 0!==e.pro_name){const t=n(e.pro_name);if(null!==t)return t;if(void 0!==e.short_name){const t=n(e.short_name);if(null!==t)return t}}return"en"!==e.language&&void 0!==e.local_description&&e.language===window.language||"en"===e.language&&void 0!==e.local_description&&e.language===window.language?e.local_description:e.description||""}},336669:(e,t,s)=>{function i(e,t){const s=new Map;return function(...i){const n=""+(t?t.apply(null,i):i[0]);if(!s.has(n)){const t=e.apply(this,i);return s.set(n,t),t}return s.get(n)}}function n(e){return(t,s,n)=>{const r=n.value,o=Symbol();return{get(){return void 0===this[o]&&(this[o]=i(r,e)),this[o].bind(this)}}}}s.d(t,{memoize:()=>i,memoizeDecorator:()=>n})}}]);