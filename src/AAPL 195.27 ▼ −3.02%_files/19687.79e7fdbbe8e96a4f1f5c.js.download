"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[19687],{214258:(e,t,n)=>{n.d(t,{solutionIds:()=>i})
;const i=JSON.parse('{"EXTENDED_HOURS":43000502023,"PRE_MARKET":43000502023,"POST_MARKET":43000502023,"SPREAD_CHARTS":43000502298,"ALERTS":43000520149,"ALERT_ON_STRATEGY":43000481368,"ALERT_WEBHOOK":43000529348,"ALERT_DESCRIPTION_PLACEHOLDER":43000531021,"ALERT_RECEIVE_NOTIFICATIONS_OH_PHONE":43000474389,"ALERT_USE_ALTERNATIVE_EMAIL":43000474394,"ALERT_WEBHOOK_CREDENTIALS":43000722015,"ALERT_KEEP_TOASTS_VISIBLE":43000737982,"VOLUME_PROFILE":43000502040,"VOLUME_PROFILE_INDICATOR":43000557450,"RENKO":43000502284,"KAGI":43000502272,"LINE_BREAK":43000502273,"PNF":43000502276,"FINANCIAL_DATA":43000543506,"BROKER_RATING":43000542490,"CRYPTO_MARKET_CAP":43000540941,"CRYPTO_PAYMENT":43000485536,"ALERT_ON_SPREAD":43000478406,"ALERT_DEGRADED_STATE":43000739521,"ALERT_ON_LOG_SCALE":43000690942,"ALERT_ON_CUSTOM_SCRIPT":43000478415,"ALERT_FUNCTION":43000597494,"SMS_VERIFICATION":43000553429,"MAGNET_MODE":43000537270,"PRIVACY_SETTINGS":43000548335,"PUBLICATION_TYPE":43000609497,"SCRIPT_ACCESS":43000482573,"FREE_USER_FAQS":43000590947,"STRATEGY_UNREALISTIC_RESULTS":43000481029,"STRATEGY_FUTURE_DATA":43000614705,"HOW_TO_USE_PAPER":43000516466,"HOW_TO_USE_CQG":43000516372,"HOW_TO_USE_OANDA":43000516375,"HOW_TO_USE_FOREXCOM":43000516374,"FAVORITE_IDEA":43000555216,"AUTHORS_INSTRUCTIONS_PUBCLICATION":43000549951,"AUTHORS_INSTRUCTIONS_EDIT":43000614618,"SCRIPT_INSTRUCTIONS":43000482573,"BAR_REPLAY_UNAVAILABILITY":43000475470,"WHAT_IS_CBOE_BZX_EXCHANGE":43000473924,"GOPRO_UPGRADE_DESCRIPTION":43000473324,"GOPRO_DOWNGRADE_DESCRIPTION":43000485437,"GOPRO_RENEW_ANNUAL_MONTHLY_DESCRIPTION":43000644491,"FINANCIALS_OWNERSHIP":43000699479,"FINANCIALS_VALUATION_SUMMARY":43000699484,"FINANCIALS_VALUATION_RATIOS":43000699495,"FINANCIALS_GROWTH_AND_PROFITABILITY":43000699485,"FINANCIALS_REVENUE_TO_PROFIT_CONVERSION":43000699496,"FINANCIALS_REVENUE_BREAKDOWN_BY_SOURCE":43000699487,"FINANCIALS_REVENUE_BREAKDOWN_BY_COUNTRY":43000699497,"FINANCIALS_REVENUE_ESTIMATES":43000699489,"FINANCIALS_EARNINGS_ESTIMATES":43000699498,"FINANCIALS_DIVIDEND_SUMMARY":43000699500,"FINANCIALS_DIVIDEND_HISTORY":43000699501,"FINANCIALS_DEBT_LEVEL":43000699502,"FINANCIALS_POSITION":43000699503,"FIRE_CONTROL_SOLUTION":43000690939,"BROKERAGE_REVIEWS":43000591351,"LINKS_TO_SOCIAL_MEDIA":43000635806,"PINE_LIBRARY_INFO":43000638371,"HOW_DO_I_UPDATE_DESKTOP_APP":43000647779,"TECHNICAL_RATINGS":43000614331,"BACKTESTING_WIDGET":43000562362,"BACKTESTING_NO_DATA":43000478450,"BACKEND_CONNECTIONS":43000694474,"DEEP_BACKTESTING_WIDGET":43000670566,"DEEP_BACKTESTING":43000666199,"DEEP_BACKTESTING_AVAILABLE_DATA":43000668210,"BETA_BROKERS":43000673434,"VIDEO_UPLOAD_FAILED":43000666607,"VIDEO_DEVICE_ACCESS":43000677209,"PUBLIC_INVITE_ONLY_SCRIPTS":43000614617,"PRIVATE_INVITE_ONLY_SCRIPTS":43000614617,"HOW_DOES_BRACKETS_MANAGEMENT_WORK":43000631987,"HOW_TO_SEE_THE_DEEPEST_HIST_DATA":43000687053,"I_CANT_SEE_ALL_HIST_DATA_ON_RES_LOWER_THAN_DAY":43000480679,"IDEAS_ON_CHART":43000694285,"GET_A_REFUND":43000485430,"USE_SETTLEMENT_AS_CLOSE_ON_DAILY_INTREVAL":43000685268,"ADJUST_FOR_CONTRACT_CHANGES":43000685266,"SWITCHING_CONTINUOUS_FUTURES_CONTRACTS":43000689313,"ADJUST_DATA_FOR_DIVIDENDS":43000590597,"WHY_IS_MY_ACCOUNT_BANNED":43000674726,"HOW_TO_PUBLISH_A_VIDEO_IDEA":43000476752,"TELL_ME_MORE_ABOUT_THE_COMMUNITY_SCRIPTS":43000558522,"HOW_TO_POST_AWESOME_IDEAS_AND_GET_LOTS_OF_LIKES":43000603748,"ABOUT_EXPERT_PLAN":43000677382,"CONNECTIONS_LIMIT_EXCEEDED":43000693877,"ACCOUNT_RECOVERY":43000619597,"HOW_TO_SYNC_CHARTS_ON_LAYOUT":43000629992,"HOW_TO_SEE_BUILTIN_INDICATOR_SOURCE":43000481659,"MULTI_CHART_MODE":43000629990,"QUICK_SEARCH":43000659671,"WHATS_AN_INDICATOR":43000543626,"CHART_TYPES":43000703407,"DRAWING_TOOLS":43000703396,"CUSTOM_INTERVALS":43000543883,"CUSTOM_RANGE_BARS":43000474007,"CANDLESTICK_PATTERNS":43000584462,"MULTI_TIMEFRAME_CHARTS":43000502591,"BAR_REPLAY":43000712747,"PINE_SCRIPT":43000561836,"SCREENER_OVERVIEW":43000635796,"AUTO_CHART_PATTERNS":43000690464,"HOW_TO_PROTECT_YOUR_ACCOUNT":43000582277,"PLUS_BUTTON":43000645256,"PLAN_UPGRADED_BUT_DATA_STILL_DELAYED":43000471705,"WHY_TAX_HAS_BEEN_ADDED_TO_MY_BILL":43000684741,"COMPARE_SYMBOLS_TOOL":43000543053,"SAVED_CHART":43000692404,"CUSTOM_INDICATOR":43000543048,"BIST_MIXED_SUBSCRIPTION":43000609137,"WHY_RENKO_NOT_WORK":43000711502,"ALERTS_SEPARATION_BY_TYPE":43000696403,"WATCHLIST_ALERTS":43000739708,"HOW_TO_SET_UP_ALERTS":43000595315,"PINE_SCRIPT_STRATEGIES":43000562362,"ECONOMIC_CALENDAR":43000707391,"SCRIPT_PUBLISHING_RULES":43000590599,"DIFFERENCE_BETWEEN_PRO_AND_NONPRO_PLANS":43000677382,"HOW_TO_USE_MINDS":43000690226,"HOW_TO_USE_TRADINGVIEW_CHAT":43000604448,"PAPER_COMPETITION":43000593579,"PAPER_COMPETITION_ACCOUNT":43000721315,"PAPER_COMPETITION_PRIZE":43000721317,"PAPER_COMPETITION_FREE_ACCOUNT":43000721310,"PUBLISHING_AND_UPDATING_IDEAS":43000591338,"USING_MINDS":43000696301,"PUBLISH_VIDEO_IDEA":43000476752,"TAROT_DECK":43000724020,"VAT_NUMBER_GUIDE":43000721910,"AVAILABLE_COMPETITION_INSTRUMENTS":43000721311,"PINE_PERFORMANCE_PROFILER":43000725216,"PINE_LOGS_INFO":43000710876,"INDICATORS":43000474048,"CHART_DATA_EXPORT":43000537255,"TIME_PRICE_OPPORTUNITIES":43000713306,"TICK_INTERVALS":43000709225,"VOLUME_FOOTPRINT":43000726164,"VOLUME_CANDLES":43000724995,"HEIKIN_ASHI":43000619436,"HLC_AREA":43000709062,"BASELINE":43000690232,"HIGH_LOW":43000677196,"COLUMNS":43000673912,"GIFTS":43000739401,"HOW_TO_BECOME_MODERATOR":43000591356,"HOW_TO_FIND_PINE_PROGRAMMER":43000601677,"HOW_TO_CHANGE_REPLAY_INTERVAL":43000739158,"SEASONALS":43000745201,"BAR_CHARTS":43000672403,"CANDLES_CHARTS":43000745269,"HOLLOW_CANDLES_CHARTS":43000745270,"LINE_CHARTS":43000745271,"STEP_LINE_CHARTS":43000745272,"LINE_WITH_MARKERS_CHARTS":43000745273,"AREA_CHARTS":43000745274,"SESSION_VOLUME_PROFILE_CHARTS":43000745275,"TIME_PRICE_OPPORTUNITIES_CHARTS":43000725590,"SOCIAL_NETWORK_HOUSE_RULES":43000591638,"QUICK_AND_EASY_GUIDE":43000718885,"HOW_TO_USE_FILTERS":43000718745,"CHART_VIEW_MODE":43000724233,"WATCHLIST_ALERTS_OTHER":43000739708,"WATCHLIST_ALERTS_HOW":43000653369,"WATCHLIST_ALERTS_CUSTOMIZE":43000662506,"PUBLISH_AN_IDEA":43000589083,"SUPERCHARTS":43000746464,"BASICS":43000746682,"TIME_INTERVALS":43000747934,"LAYOUTS":43000746975,"CONFIGURE":43000748166,"MASTERING":43000745825,"SET_UP_ALTERNATIVE_EMAIL_ADDRESS":43000474398,"DELETE_ACCOUNT":43000550534,"SIGNATURE_ON_POSTS":43000472770,"SCREENER_DEX":43000744465,"SCREENER_CEX":43000746110,"SCREENER_CRYPTO":43000718742,"SCREENER_BOND":43000743951,"SCREENER_ETF":43000718743,"SCREENER_STOCK":43000718866}')
},129586:(e,t,n)=>{function i(e){return"object"==typeof e&&"metaInfo"in e}function r(e){return null==e}var o;n.d(t,{TelemetryGroup:()=>o,hasMetaInfo:()=>i,isAbsentParam:()=>r}),function(e){e.Fast="fast",e.Medium="medium",e.Slow="slow"}(o||(o={}))},603774:(e,t,n)=>{n.d(t,{logPineMetaInfoIssues:()=>s});var i=n(735566),r=n(136734);function o(e,t,n){(0,r.getPersistentLogger)()?.addPersistentLogEntry(`Detected meta info (id: ${e.id}) issue: ${t}. Source: ${n}`,i.LOGLEVEL.ERROR,"PineMetaInfoValidation")}function s(e,t){t&&t.defaults&&t.defaults.inputs&&!t.defaults.inputs.text&&o(t,'no "defaults.inputs.text" value',e),t&&t.inputs&&(t.inputs.find((e=>"text"===e.id))||o(t,'no input with id "text"',e))}},971417:(e,t,n)=>{function i(e){return e===r(e)}function r(e){const t=e.indexOf("$"),n=e.indexOf("@");return t<0&&n>=0?null:e.substring(Math.max(t+1,0),n>=0?n:e.length)}function o(e){return e.startsWith("PUB;")}function s(e){return e.startsWith("USER;")}function a(e){return e.startsWith("STD;")}function l(e){return e.includes("Candlestick%1Pattern%1")}function u(e){return e.startsWith("EDGR_")}n.d(t,{extractPineId:()=>r,isCandleStickId:()=>l,isCustomPineId:()=>s,isEdgrPineId:()=>u,isPineIdString:()=>i,isPublishedPineId:()=>o,isStandardPineId:()=>a})},754105:(e,t,n)=>{var i;function r(e){return"scriptTitle"in e&&"modified"in e}function o(e){return"userId"in e&&"scriptAccess"in e}function s(e){return"strategy"===e.kind}function a(e){return"library"===e.kind}n.d(t,{Severity:()=>i,isPubPineInfo:()=>o,isSavedPineInfo:()=>r,isScriptLibrary:()=>a,isScriptStrategy:()=>s}),function(e){e.ERROR="error",e.WARNING="warning"}(i||(i={}))},884934:(e,t,n)=>{n.d(t,{convertScript:()=>g,deletePine:()=>L,getLastVersion:()=>F,getPineFacadeUrl:()=>a.getPineFacadeUrl,getPineSourceCode:()=>N,getVersions:()=>w,isAuthToGetPineSourceCode:()=>O,isAuthToWritePineScript:()=>P,isPubPineInfo:()=>f.isPubPineInfo,isSavedPineInfo:()=>f.isSavedPineInfo,isScriptLibrary:()=>f.isScriptLibrary,isScriptStrategy:()=>f.isScriptStrategy,parseScriptTitleAsync:()=>v,renamePine:()=>b,renameVersion:()=>M,requestBuiltinScripts:()=>y,requestUserScripts:()=>C,saveNew:()=>I,saveNewDraft:()=>A,saveNext:()=>R,saveNextDraft:()=>T,translateScriptAsync:()=>E,translateScriptAsync2:()=>S});var i=n(735566),r=n(345848),o=n(623213);class s{constructor(){this._cache=new Map,window.loginStateChange&&window.loginStateChange.subscribe(this,this.clear)}get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t)}delete(e){return this._cache.delete(e)}clear(){this._cache.clear()}}var a=n(881992),l=n(971417),u=n(791488),c=n(197677),d=n(603774),f=n(754105);n(129586);const _=(0,i.getLogger)("Chart.Study.Versioning"),p=new s,h=new s,m=new class extends s{constructor(){super(),this._key=(0,o.guid)()}reset(e){super.set(this._key,e)}get(){return super.get(this._key)}clear(){super.clear()}};async function S(e,t){(0,r.trackEvent)("Pine","ScriptLib.translateScript");const n={};(0,l.isCustomPineId)(e)||(n.user_name=(0,a.getUserName)());try{const i=await(0,c.pineFacadeFetch)({
urlPath:`translate/${e}/${t}`,urlParams:n}),r=(0,a.handleTranslateResult)(i);(0,d.logPineMetaInfoIssues)("Pine.translateScriptAsync2",r.metaInfo);return+t<0&&(p.delete(e),h.delete(e),m.clear(),(0,a.onLegacyScriptProceed)(r.metaInfo)),r}catch(e){throw e}}async function E(e,t,n={},i=!1){return(0,r.trackEvent)("Pine","ScriptLib.translateScript"),(0,c.pineFacadeFetch)({method:"POST",urlPath:`translate_source/${t}`,urlParams:{is_pine_ex:i},data:{user_name:(0,a.getUserName)(),source:e,inputs:JSON.stringify(n)}}).then((e=>{const t=(0,a.handleTranslateResult)(e);return(0,d.logPineMetaInfoIssues)("Pine.translateScriptAsync",t.metaInfo),t}))}function g(e,t){return(0,c.pineFacadeFetch)({method:"POST",urlPath:"convert",data:{source:e,version_to:String(t)}}).then((e=>{if(e.reason2?.errors.length)throw e.reason2;if(e.reason)throw e.reason;return(0,a.handleResult)(e)}))}function T(e,t,n,i=!1){if((0,r.trackEvent)("Pine","ScriptLib.saveNextDraft"),!t)return Promise.reject(u.EMPTY_SOURCE_CODE);(0,a.onModifyScriptActiveChanged)(e,n,!0);const o=(0,c.pineFacadeFetch)({method:"POST",urlPath:`save/next_draft/${e}`,urlParams:{user_name:(0,a.getUserName)(),allow_create_new:i},data:{source:t}}).then((e=>{const t=(0,a.handleSaveResult)(e);return(0,d.logPineMetaInfoIssues)("Pine.saveNextDraft",t.metaInfo),t}));return o.finally((()=>(0,a.onModifyScriptActiveChanged)(e,n,!1))),o}function A(e){return(0,r.trackEvent)("Pine","ScriptLib.saveNewDraft"),e?(0,c.pineFacadeFetch)({method:"POST",urlPath:"save/new_draft",urlParams:{user_name:(0,a.getUserName)(),allow_use_existing_draft:!0},data:{source:e}}).then((e=>{const t=(0,a.handleSaveResult)(e);return(0,d.logPineMetaInfoIssues)("Pine.saveNewDraft",t.metaInfo),t})):Promise.reject(u.EMPTY_SOURCE_CODE)}function I({scriptSource:e,scriptName:t,allowOverwrite:n,currentVersion:i}){if((0,r.trackEvent)("Pine","ScriptLib.saveNew"),!e)return Promise.reject(u.EMPTY_SOURCE_CODE);const o={name:t,user_name:(0,a.getUserName)()};return n&&(o.allow_overwrite=!0),(0,c.pineFacadeFetch)({method:"POST",urlPath:"save/new",urlParams:o,data:{source:e}}).then((e=>{m.clear();const t=(0,a.handleSaveResult)(e);return(0,d.logPineMetaInfoIssues)("Pine.saveNew",t.metaInfo),(0,a.onModifyScript)(t.metaInfo,i,!t.success,t.compileErrors.errors),t}))}function R({scriptIdPart:e,scriptSource:t,currScriptVersion:n,isLegacyScript:i,scriptName:o}){if((0,r.trackEvent)("Pine","ScriptLib.saveNext"),!t)return Promise.reject(u.EMPTY_SOURCE_CODE);const s={user_name:(0,a.getUserName)(),allow_create_new:i},l={source:t};return void 0!==o&&(s.name=o),(0,a.onModifyScriptActiveChanged)(e,n,!0),(0,c.pineFacadeFetch)({method:"POST",urlPath:`save/next/${e}`,urlParams:s,data:l}).then((e=>{m.clear();const t=(0,a.handleSaveResult)(e);return(0,d.logPineMetaInfoIssues)("Pine.saveNext",t.metaInfo),(0,a.onModifyScript)(t.metaInfo,n,!t.success,t.compileErrors.errors),t})).finally((()=>(0,a.onModifyScriptActiveChanged)(e,n,!1)))}function v(e){return(0,r.trackEvent)("Pine","ScriptLib.parseScriptTitle"),e?(0,c.pineFacadeFetch)({method:"POST",urlPath:"parse_title",
data:{user_name:(0,a.getUserName)(),source:e}}).then((e=>(0,a.handleResult)(e))):Promise.reject(u.EMPTY_SOURCE_CODE)}function P(e){if((0,l.isCustomPineId)(e))return Promise.resolve(!0);const t=h.get(e);if(t)return t;(0,r.trackEvent)("Pine","ScriptLib.isAuthToWritePineScript");const n=(0,c.pineFacadeFetch)({urlPath:`is_auth_to_write/${e}`});return h.set(e,n),n}function O(e,t){const n=p.get(e);if(n)return n;(0,r.trackEvent)("Pine","ScriptLib.isAuthToGetPineSourceCode");const i=(0,c.pineFacadeFetch)({urlPath:`is_auth_to_get/${e}/${t}`});return p.set(e,i),i}function N(e,t,n){return(0,r.trackEvent)("Pine","ScriptLib.getPineSourceCode"),(0,c.pineFacadeFetch)({urlPath:`get/${e}/${t}`,urlParams:{no_4xx:n}})}function C(){if((0,r.trackEvent)("Pine","ScriptLib.requestUserScripts"),!window.is_authenticated)return Promise.resolve([]);const e=m.get();if(e)return e;const t=(0,c.pineFacadeFetch)({urlPath:"list",urlParams:{filter:"saved"}});return m.reset(t),t}async function y(){(0,r.trackEvent)("Pine","ScriptLib.requestBuiltinScripts");try{_.logNormal("Request built-in scripts");const e=await(0,c.pineFacadeFetch)({urlPath:"list",urlParams:{filter:"standard"}});return _.logNormal("Request built-in scripts finished"),e}catch(e){throw _.logWarn("Request built-in scripts finished with fail"),e}}function L(e){return(0,r.trackEvent)("Pine","ScriptLib.deletePine"),(0,c.pineFacadeFetch)({method:"POST",urlPath:`delete/${e}`,urlParams:{user_name:(0,a.getUserName)()}}).then((t=>(p.delete(e),h.delete(e),m.clear(),(0,a.onDeleteScript)(e),t)))}function b(e,t,n=!1){return(0,r.trackEvent)("Pine","ScriptLib.renamePine"),(0,c.pineFacadeFetch)({method:"POST",urlPath:`rename/${t}`,urlParams:{name:e,user_name:(0,a.getUserName)(),force:n}}).then((n=>(m.clear(),(0,a.onRenameScript)(t,e),n)))}async function w(e,t){(0,r.trackEvent)("Pine","ScriptLib.getVersions");try{_.logNormal("Request script versions");return await(0,c.pineFacadeFetch)({method:"GET",urlPath:`versions/${e}`,urlParams:{limit:t?String(t):void 0}})}catch(e){return _.logWarn("Request script versions finished with fail"),[]}}async function F(e){(0,r.trackEvent)("Pine","ScriptLib.getLastVersions");try{_.logNormal("Request the last script versions");return(await(0,c.pineFacadeFetch)({method:"GET",urlPath:`versions/${e}/last`}))[0]??null}catch(e){return _.logWarn("Request script versions finished with fail"),null}}async function M(e,t,n){try{_.logNormal(`Rename script version ${t}`);return await(0,c.pineFacadeFetch)({method:"PUT",urlPath:`name/${e}/${t}`,urlParams:{name:n??""}})}catch(e){return _.logWarn("Rename script version finished with fail"),null}}(0,a.applyGlobalScriptListeners)(p,h,m)},791488:(e,t,n)=>{n.d(t,{EMPTY_SOURCE_CODE:()=>u,PINE_SCRIPT_MODIFIED_LOCK:()=>c,RE_MESSAGE_LINE_WITH_DIGITS:()=>d,TV_SCRIPT_DELETED:()=>s,TV_SCRIPT_LEGACY_PINE_PROCESSED:()=>l,TV_SCRIPT_MODIFICATION_ACTIVE:()=>r,TV_SCRIPT_MODIFIED:()=>o,TV_SCRIPT_RENAMED:()=>a,pineTelemetryGroups:()=>f});var i=n(129586)
;const r="TVScriptModificationActive",o="TVScriptModified",s="TVScriptDeleted",a="TVScriptRenamed",l="TVScriptLegacyPineProcessed",u="Cannot save empty source code",c="pine_script_modified_lock",d=/[l|L]ines? (\d*)/,f=new Map([["delete",i.TelemetryGroup.Fast],["get",i.TelemetryGroup.Fast],["is_auth_to_get",i.TelemetryGroup.Fast],["is_auth_to_write",i.TelemetryGroup.Fast],["parse_title",i.TelemetryGroup.Fast],["rename",i.TelemetryGroup.Fast],["lib_list",i.TelemetryGroup.Fast],["list",i.TelemetryGroup.Medium],["eval_pine_ex",i.TelemetryGroup.Medium],["translate_light",i.TelemetryGroup.Medium],["process_legacy",i.TelemetryGroup.Slow],["publish",i.TelemetryGroup.Slow],["save",i.TelemetryGroup.Slow],["translate",i.TelemetryGroup.Slow],["translate_source",i.TelemetryGroup.Slow],["gen_alert",i.TelemetryGroup.Slow]])},197677:(e,t,n)=>{n.d(t,{pineFacadeFetch:()=>_});var i=n(735566),r=n(444372),o=n(803912),s=n(881992),a=n(129586),l=n(175203),u=n(791488);const c=(0,i.getLogger)("Chart.Study.Versioning");function d(e,t){const n=new URL(function(e){return e.split("/").map((e=>encodeURIComponent(e))).join("/")}(e),(0,s.getPineFacadeUrl)());for(const e in t){const i=t[e];(0,a.isAbsentParam)(i)||n.searchParams.set(e,String(i))}return n.toString()}function f(e,t){const n={method:e,mode:"cors",credentials:"include"};return"POST"===e&&t&&(n.body=function(e){const t=new FormData;for(const n of Object.keys(e))t.append(n,e[n]);return t}(t)),n}async function _({urlPath:e,urlParams:t,data:i,method:s="GET"}){const a=d(e,t),_=f(s,i),p=function(e){c.logNormal(`Requesting pine facade scripts, url: ${e}`);const t=e.split("/")[0],n=u.pineTelemetryGroups.get(t),i=Date.now();return t=>{const r=Date.now()-i;if(l.telemetry.sendReport("pine",`${n}_group_time_frame`,{value:r}),t)return l.telemetry.sendReport("pine",`${n}_group_ok`),void c.logNormal(`Requesting pine facade scripts finished, url: ${e}`);l.telemetry.sendReport("pine",`${n}_group_error`),c.logError(`Requesting pine facade scripts failed, url: ${e}`)}}(e);try{const e=await(0,o.fetch)(a,_);if(!e.ok)throw function(e){return e.status>=500?r.t(null,void 0,n(638449)):413===e.status?r.t(null,void 0,n(450240)):420===e.status?r.t(null,void 0,n(915141)):e.status>=400?r.t(null,void 0,n(982137)):r.t(null,void 0,n(201007))}(e);const t=await e.json();return p(!0),t}catch(e){throw p(!1),e}}},881992:(e,t,n)=>{n.d(t,{applyGlobalScriptListeners:()=>A,getIsPineEditorModifed:()=>u,getOnlyPineStudies:()=>I,getPineFacadeUrl:()=>d,getUserName:()=>c,handleResult:()=>_,handleSaveResult:()=>h,handleTranslateResult:()=>p,isPineReasonData:()=>R,onDeleteScript:()=>E,onLegacyScriptProceed:()=>T,onModifyScript:()=>S,onModifyScriptActiveChanged:()=>m,onRenameScript:()=>g});var i=n(251954),r=n(226722),o=n(971417),s=n(791488),a=n(401843),l=n(129586);async function u(){if(!navigator.locks)return!1;const e=(await navigator.locks.query()).held;return!!e?.find((e=>e.name===s.PINE_SCRIPT_MODIFIED_LOCK))}function c(){return window.user&&window.user.username}function d(){const e=new URL(window.PINE_URL,location.origin)
;return e.pathname.endsWith("/")||(e.pathname+="/"),e.href}function f(e){if("object"==typeof e.reason)return e.reason;if(e.reason2)return e.reason2;const t={errors:[],warnings:[]};if((0,l.hasMetaInfo)(e.result)){const n=e.result&&e.result.metaInfo;n&&void 0!==n.warnings&&n.warnings.forEach((e=>t.warnings.push({message:e})))}if(e.reason){(Array.isArray(e.reason)?e.reason:e.reason.split("\n")).forEach((e=>{const n=e.match(s.RE_MESSAGE_LINE_WITH_DIGITS),i=n&&n.length&&Number(n[1]),r={message:e};if("number"==typeof i){r.start={line:i,column:0};const e=r.message.split(": ");e.shift(),r.message=e.join(": ")}t.errors.push(r)}))}return t}function _(e){if(e.success)return e.result;if(e.error)throw e.error;throw f(e)}function p(e){if(e.success)return{success:e.success,metaInfo:e.result.metaInfo,compileErrors:f(e)};throw new a.PineCompileFailErrorImpl(f(e),e.result.metaInfo)}function h(e){if(e.error)throw e.error;return{success:e.success,metaInfo:e.result.metaInfo,compileErrors:f(e)}}function m(e,t,n){const o={scriptIdPart:e,scriptVersionToUpdate:t,active:n};r.TVXWindowEvents.emit(s.TV_SCRIPT_MODIFICATION_ACTIVE,JSON.stringify(o)),i.emit(s.TV_SCRIPT_MODIFICATION_ACTIVE,o),setTimeout((async()=>{const e=await(window.scriptUpdater?.());e?.onModifyScriptActiveChanged(o)}))}function S(e,t,n,o){const a={scriptMetaInfo:e,scriptVersionToUpdate:t,compilationFailed:n,compileErrors:o};r.TVXWindowEvents.emit(s.TV_SCRIPT_MODIFIED,JSON.stringify(a)),i.emit(s.TV_SCRIPT_MODIFIED,a),window.scriptUpdater?.()?.then((e=>e.onTVScriptModified({...a,isSelfCall:!0})))}function E(e){const t={scriptIdPart:e};r.TVXWindowEvents.emit(s.TV_SCRIPT_DELETED,JSON.stringify(t)),i.emit(s.TV_SCRIPT_DELETED,t),setTimeout((async()=>{const e=await(window.scriptUpdater?.());await(e?.onTVScriptDeleted({...t,isSelfCall:!0}))}))}function g(e,t){const n={scriptIdPart:e,scriptName:t};r.TVXWindowEvents.emit(s.TV_SCRIPT_RENAMED,JSON.stringify(n)),i.emit(s.TV_SCRIPT_RENAMED,n),setTimeout((async()=>{const e=await(window.scriptUpdater?.());e?.onTVScriptRenamed({...n,isSelfCall:!0})}))}function T(e){const t={scriptMetaInfo:e};r.TVXWindowEvents.emit(s.TV_SCRIPT_LEGACY_PINE_PROCESSED,JSON.stringify(t)),i.emit(s.TV_SCRIPT_LEGACY_PINE_PROCESSED,t),setTimeout((async()=>{const e=await(window.scriptUpdater?.());e?.onTVScriptLegacyPineProcessed(t)}))}function A(e,t,n){r.TVXWindowEvents.on(s.TV_SCRIPT_MODIFICATION_ACTIVE,(async e=>{const t=await(window.scriptUpdater?.());t?.onModifyScriptActiveChanged(JSON.parse(e))})),r.TVXWindowEvents.on(s.TV_SCRIPT_MODIFIED,(async e=>{n.clear();const t=await(window.scriptUpdater?.());t?.onTVScriptModified(JSON.parse(e))})),r.TVXWindowEvents.on(s.TV_SCRIPT_DELETED,(async i=>{e.clear(),t.clear(),n.clear();const r=await(window.scriptUpdater?.());await(r?.onTVScriptDeleted(JSON.parse(i)))})),r.TVXWindowEvents.on(s.TV_SCRIPT_RENAMED,(async e=>{n.clear();const t=await(window.scriptUpdater?.());t?.onTVScriptRenamed(JSON.parse(e))})),r.TVXWindowEvents.on(s.TV_SCRIPT_LEGACY_PINE_PROCESSED,(async e=>{n.clear();const t=await(window.scriptUpdater?.())
;t?.onTVScriptLegacyPineProcessed(JSON.parse(e))}))}function I(e){return e.filter((e=>{const t=(0,o.extractPineId)(e.metaInfo().id);return t&&(0,o.isCustomPineId)(t)}))}function R(e){return"object"==typeof e&&null!==e&&("errors"in e||"warnings"in e)}},401843:(e,t,n)=>{n.d(t,{PineCompileFailErrorImpl:()=>i});class i extends Error{constructor(e,t){super("Pine translation failed"),this.reason=e,this.metaInfo=t}}},660439:(e,t,n)=>{n.d(t,{calculateMinMax:()=>N,collectAllPaths:()=>b,compareTwoCollectionsByIds:()=>T,compareTwoPrimitiveValuesArrays:()=>A,compareTwoPrimitiveValuesRecords:()=>I,findFirst:()=>E,indexOf:()=>g,intersect:()=>h,join:()=>m,lowerbound:()=>l,lowerboundExt:()=>a,mapEntriesGenerator:()=>v,minMax:()=>O,moveAfter:()=>_,moveBefore:()=>p,moveToHead:()=>f,nestedMapGenerator:()=>P,removeEmptyObjectsFromRecordInplace:()=>y,removeItemFromArray:()=>S,subtract:()=>d,sum:()=>R,upperbound:()=>c});var i=n(715943),r=n(182433),o=n(650151);function s(e,t){return e<t}function a(e,t,n,i,r){let o=r-i;for(;0<o;){const r=o>>1,s=i+r;n(e(s),t)?(i=s+1,o-=r+1):o=r}return i}function l(e,t,n,i=0,r=e.length){return a((t=>e[t]),t,n,i,r)}function u(e,t,n=0,i=e.length){return l(e,t,s,n,i)}function c(e,t,n,i=0,r=e.length){let o=r-i;for(;0<o;){const r=o>>1,s=i+r;n(t,e[s])?o=r:(i=s+1,o-=r+1)}return i}function d(e,t){return e.filter((e=>!t.includes(e)))}function f(e,t){const n=e.indexOf(t);return n<0?e.slice():[t].concat(e.slice(0,n)).concat(e.slice(n+1))}function _(e,t,n){const i=new Set(t),r=[],o=[],s=[];return e.forEach(((e,t)=>{i.has(e)?o.push(e):(r.push(e),s.push(t))})),n=n<e.length-1?u(s,n+1):r.length,r.splice(n,0,...o),{newItems:r,movedItemsStartIndex:n}}function p(e,t,n){const i=new Set(t),r=[],o=[],s=[];return e.forEach(((e,t)=>{i.has(e)?o.push(e):(r.push(e),s.push(t))})),n=n<=e.length-1?u(s,n):r.length,r.splice(n,0,...o),{newItems:r,movedItemsStartIndex:n}}function h(e,t){const n=new Set;return e.forEach((e=>{t.has(e)&&n.add(e)})),n}function m(e,t){const n=new Set(e);return t.forEach((e=>n.add(e))),n}function S(e,t){const n=e.indexOf(t);(0,o.assert)(-1!==n,"Item is not found"),e.splice(n,1)}function E(e,t){for(const n of e)if(t(n))return n;return null}function g(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function T(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n].id()!==t[n].id())return!1;return!0}function A(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function I(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(!A(n,i))return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function R(e){return e.reduce(((e,t)=>e+t),0)}function*v(e){for(const[t,n]of e)yield[t,n]}function*P(e,t){for(const[n,i]of e)if(void 0===t)for(const[,e]of i)yield[n,e];else{const e=i.get(t);void 0!==e&&(yield[n,e])}}function O(e){return[Math.min(...e),Math.max(...e)]}function N(e,t){return O(e.map(t))}function C(e){for(let t=e.length-1;t>=0;t--)Array.isArray(e[t])?(C(e[t]),(0,i.default)(e[t])&&e.splice(t,1)):(0,
r.default)(e[t])&&(y(e[t]),(0,i.default)(e[t])&&e.splice(t,1))}function y(e){const t=Object.keys(e);for(const n of t)Array.isArray(e[n])?(C(e[n]),(0,i.default)(e[n])&&delete e[n]):(0,r.default)(e[n])&&(y(e[n]),(0,i.default)(e[n])&&delete e[n]);return e}function L(e,t,n){const i=Object.keys(e);for(const o of i){const i=t?`${t}.${o}`:o;(0,r.default)(e[o])?L(e[o],i,n):n.push(i)}}function b(e){const t=[];return L(e,"",t),t}},986818:(e,t,n)=>{n.d(t,{availableTimezones:()=>o,timezoneIsAvailable:()=>l,timezoneTitle:()=>u});var i=n(128299),r=n(400783);const o=(0,r.getAvailableTimezones)(),s=new Map;o.forEach((e=>{s.set(e.id,!0)}));const a=new Map;r.specialTimezones.concat(r.customTimezones).forEach((e=>{a.set(e.id,!0)}));function l(e){return s.has(e)}function u(e){for(const{id:t,title:n}of r.customTimezones)if(t===e){return`${n} (${(0,i.parseTzOffset)(e).string})`}for(const{id:t,title:n}of o)if(t===e)return`${n}`;return e}},560770:(e,t,n)=>{var i,r;n.d(t,{HorizontalAlign:()=>i,VerticalAlign:()=>r}),function(e){e.Left="left",e.Right="right",e.Center="center"}(i||(i={})),function(e){e.Top="top",e.Bottom="bottom",e.Middle="middle"}(r||(r={}))},128299:(e,t,n)=>{n.d(t,{parseTzOffset:()=>r});var i=n(493239);function r(e,t=Date.now()){const n=(0,i.get_timezone)(e).offset_utc(t);let r="";const o=n/1e3/60/60;o%1&&(r=":"+Math.round(Math.abs(o%1*60)).toString().padStart(2,"0"));let s="";return s=o>0?"+"+(o-o%1)+r:0===o?"":String(o-o%1+r),{offset:n,string:"UTC"+s}}},810715:(e,t,n)=>{n.d(t,{clone:()=>i.clone,isNumber:()=>i.isNumber,isObject:()=>i.isObject,merge:()=>i.merge});var i=n(536794)},400783:(e,t,n)=>{n.d(t,{customTimezones:()=>s,getAvailableTimezones:()=>l,specialTimezones:()=>o});var i=n(444372),r=n(128299);const o=[{id:"Etc/UTC",get title(){return i.t(null,void 0,n(901833))}},{id:"exchange",get title(){return i.t(null,void 0,n(786905))}}],s=[{id:"Africa/Cairo",get title(){return i.t(null,void 0,n(365736))},offset:0},{id:"Africa/Casablanca",get title(){return i.t(null,void 0,n(770409))},offset:0},{id:"Africa/Johannesburg",get title(){return i.t(null,void 0,n(239585))},offset:0},{id:"Africa/Lagos",get title(){return i.t(null,void 0,n(919931))},offset:0},{id:"Africa/Nairobi",get title(){return i.t(null,void 0,n(740977))},offset:0},{id:"Africa/Tunis",get title(){return i.t(null,void 0,n(21007))},offset:0},{id:"America/Anchorage",get title(){return i.t(null,void 0,n(942630))},offset:0},{id:"America/Argentina/Buenos_Aires",get title(){return i.t(null,void 0,n(325282))},offset:0},{id:"America/Bogota",get title(){return i.t(null,void 0,n(273905))},offset:0},{id:"America/Caracas",get title(){return i.t(null,void 0,n(930948))},offset:0},{id:"America/Chicago",get title(){return i.t(null,void 0,n(72452))},offset:0},{id:"America/El_Salvador",get title(){return i.t(null,void 0,n(255502))},offset:0},{id:"America/Juneau",get title(){return i.t(null,void 0,n(367560))},offset:0},{id:"America/Lima",get title(){return i.t(null,void 0,n(759444))},offset:0},{id:"America/Los_Angeles",get title(){return i.t(null,void 0,n(28733))},offset:0},{
id:"America/Mexico_City",get title(){return i.t(null,void 0,n(773332))},offset:0},{id:"America/New_York",get title(){return i.t(null,void 0,n(940544))},offset:0},{id:"America/Phoenix",get title(){return i.t(null,void 0,n(114055))},offset:0},{id:"America/Santiago",get title(){return i.t(null,void 0,n(630231))},offset:0},{id:"America/Sao_Paulo",get title(){return i.t(null,void 0,n(991912))},offset:0},{id:"America/Toronto",get title(){return i.t(null,void 0,n(110095))},offset:0},{id:"America/Vancouver",get title(){return i.t(null,void 0,n(632838))},offset:0},{id:"US/Mountain",get title(){return i.t(null,void 0,n(327358))},offset:0},{id:"Asia/Almaty",get title(){return i.t(null,void 0,n(398128))},offset:0},{id:"Asia/Ashkhabad",get title(){return i.t(null,void 0,n(763627))},offset:0},{id:"Asia/Bahrain",get title(){return i.t(null,void 0,n(290594))},offset:0},{id:"Asia/Bangkok",get title(){return i.t(null,void 0,n(947045))},offset:0},{id:"Asia/Chongqing",get title(){return i.t(null,void 0,n(850349))},offset:0},{id:"Asia/Colombo",get title(){return i.t(null,void 0,n(10871))},offset:0},{id:"Asia/Dhaka",get title(){return i.t(null,void 0,n(724959))},offset:0},{id:"Asia/Dubai",get title(){return i.t(null,void 0,n(523650))},offset:0},{id:"Asia/Ho_Chi_Minh",get title(){return i.t(null,void 0,n(334491))},offset:0},{id:"Asia/Hong_Kong",get title(){return i.t(null,void 0,n(248861))},offset:0},{id:"Asia/Jakarta",get title(){return i.t(null,void 0,n(414995))},offset:0},{id:"Asia/Jerusalem",get title(){return i.t(null,void 0,n(436057))},offset:0},{id:"Asia/Karachi",get title(){return i.t(null,void 0,n(70913))},offset:0},{id:"Asia/Kabul",get title(){return i.t(null,void 0,n(799563))},offset:0},{id:"Asia/Kathmandu",get title(){return i.t(null,void 0,n(454533))},offset:0},{id:"Asia/Kolkata",get title(){return i.t(null,void 0,n(31561))},offset:0},{id:"Asia/Kuala_Lumpur",get title(){return i.t(null,void 0,n(538561))},offset:0},{id:"Asia/Kuwait",get title(){return i.t(null,void 0,n(76614))},offset:0},{id:"Asia/Manila",get title(){return i.t(null,void 0,n(348991))},offset:0},{id:"Asia/Muscat",get title(){return i.t(null,void 0,n(909865))},offset:0},{id:"Asia/Nicosia",get title(){return i.t(null,void 0,n(94600))},offset:0},{id:"Asia/Qatar",get title(){return i.t(null,void 0,n(328756))},offset:0},{id:"Asia/Riyadh",get title(){return i.t(null,void 0,n(837974))},offset:0},{id:"Asia/Seoul",get title(){return i.t(null,void 0,n(326820))},offset:0},{id:"Asia/Shanghai",get title(){return i.t(null,void 0,n(601852))},offset:0},{id:"Asia/Singapore",get title(){return i.t(null,void 0,n(977377))},offset:0},{id:"Asia/Taipei",get title(){return i.t(null,void 0,n(511034))},offset:0},{id:"Asia/Tehran",get title(){return i.t(null,void 0,n(806686))},offset:0},{id:"Asia/Tokyo",get title(){return i.t(null,void 0,n(769122))},offset:0},{id:"Asia/Yangon",get title(){return i.t(null,void 0,n(553168))},offset:0},{id:"Atlantic/Azores",get title(){return i.t(null,void 0,n(287580))},offset:0},{id:"Atlantic/Reykjavik",get title(){return i.t(null,void 0,n(813386))},
offset:0},{id:"Australia/Adelaide",get title(){return i.t(null,void 0,n(437265))},offset:0},{id:"Australia/Brisbane",get title(){return i.t(null,void 0,n(579336))},offset:0},{id:"Australia/Perth",get title(){return i.t(null,void 0,n(724436))},offset:0},{id:"Australia/Sydney",get title(){return i.t(null,void 0,n(531622))},offset:0},{id:"Europe/Amsterdam",get title(){return i.t(null,void 0,n(936485))},offset:0},{id:"Europe/Athens",get title(){return i.t(null,void 0,n(373702))},offset:0},{id:"Europe/Belgrade",get title(){return i.t(null,void 0,n(271797))},offset:0},{id:"Europe/Berlin",get title(){return i.t(null,void 0,n(764313))},offset:0},{id:"Europe/Bratislava",get title(){return i.t(null,void 0,n(270876))},offset:0},{id:"Europe/Brussels",get title(){return i.t(null,void 0,n(991499))},offset:0},{id:"Europe/Bucharest",get title(){return i.t(null,void 0,n(633672))},offset:0},{id:"Europe/Budapest",get title(){return i.t(null,void 0,n(20313))},offset:0},{id:"Europe/Copenhagen",get title(){return i.t(null,void 0,n(538917))},offset:0},{id:"Europe/Dublin",get title(){return i.t(null,void 0,n(479716))},offset:0},{id:"Europe/Helsinki",get title(){return i.t(null,void 0,n(348203))},offset:0},{id:"Europe/Istanbul",get title(){return i.t(null,void 0,n(478326))},offset:0},{id:"Europe/Lisbon",get title(){return i.t(null,void 0,n(53375))},offset:0},{id:"Europe/London",get title(){return i.t(null,void 0,n(119439))},offset:0},{id:"Europe/Luxembourg",get title(){return i.t(null,void 0,n(681038))},offset:0},{id:"Europe/Madrid",get title(){return i.t(null,void 0,n(52066))},offset:0},{id:"Europe/Malta",get title(){return i.t(null,void 0,n(638365))},offset:0},{id:"Europe/Moscow",get title(){return i.t(null,void 0,n(564039))},offset:0},{id:"Europe/Oslo",get title(){return i.t(null,void 0,n(375722))},offset:0},{id:"Europe/Paris",get title(){return i.t(null,void 0,n(161879))},offset:0},{id:"Europe/Prague",get title(){return i.t(null,void 0,n(81248))},offset:0},{id:"Europe/Riga",get title(){return i.t(null,void 0,n(594022))},offset:0},{id:"Europe/Rome",get title(){return i.t(null,void 0,n(152961))},offset:0},{id:"Europe/Stockholm",get title(){return i.t(null,void 0,n(86716))},offset:0},{id:"Europe/Tallinn",get title(){return i.t(null,void 0,n(779995))},offset:0},{id:"Europe/Vienna",get title(){return i.t(null,void 0,n(23160))},offset:0},{id:"Europe/Vilnius",get title(){return i.t(null,void 0,n(960534))},offset:0},{id:"Europe/Warsaw",get title(){return i.t(null,void 0,n(505959))},offset:0},{id:"Europe/Zurich",get title(){return i.t(null,void 0,n(362859))},offset:0},{id:"Pacific/Auckland",get title(){return i.t(null,void 0,n(866103))},offset:0},{id:"Pacific/Chatham",get title(){return i.t(null,void 0,n(36549))},offset:0},{id:"Pacific/Fakaofo",get title(){return i.t(null,void 0,n(298549))},offset:0},{id:"Pacific/Honolulu",get title(){return i.t(null,void 0,n(879668))},offset:0},{id:"Pacific/Norfolk",get title(){return i.t(null,void 0,n(467891))},offset:0}];function a(e,t,n){const i=function(e){return e.map((e=>{
const{id:t}=e,{string:n,offset:i}=(0,r.parseTzOffset)(t);return{id:t,offset:i,get title(){return`(${n}) ${e.title}`}}}))}(e),o=n.filter((({alias:e})=>Boolean(e))).map((e=>{const{alias:t,id:n}=e,{string:i,offset:o}=(0,r.parseTzOffset)(t);return{id:n,offset:o,get title(){return`(${i}) ${e.title}`},alias:t}})),s=function(e){return e.sort(((e,t)=>{const n=e.offset-t.offset;return 0!==n?n:e.title.localeCompare(t.title)}))}(i.concat(o));return t.concat(s)}function l(){return a(s,o,[])}},751094:(e,t,n)=>{n.d(t,{WatchedObject:()=>i.WatchedObject});var i=n(806660)},703347:(e,t,n)=>{n.r(t),n.d(t,{Action:()=>l,Loader:()=>c,Separator:()=>u});var i=n(650151),r=n(470316),o=n(623213),s=n(547465);class a extends s.Delegate{constructor(e){super(),this._onStartListening=null,this._onStopListening=null,this._onStartListening=e||null}subscribe(e,t,n){const i=0===this._listeners.length;super.subscribe(e,t,n),i&&this._listeners.length>0&&this._onStartListening&&(this._onStopListening=this._onStartListening())}unsubscribe(e,t){const n=0===this._listeners.length;super.unsubscribe(e,t),!n&&0===this._listeners.length&&this._onStopListening&&(this._onStopListening(),this._onStopListening=null)}unsubscribeAll(e){const t=0===this._listeners.length;super.unsubscribeAll(e),!t&&0===this._listeners.length&&this._onStopListening&&(this._onStopListening(),this._onStopListening=null)}destroy(){this._onStopListening&&(this._onStopListening(),this._onStopListening=null),super.destroy()}}class l{constructor(e){this.type="action",this._destroyed=!1,this._loadOptionsPromise=null,this._customAction=null;const{actionId:t,options:n,optionsLoader:r,customActionOptions:s,customActionOptionsLoader:u,id:c=o.guid(),onStartListening:d}=e;(0,i.assert)(void 0!==t,"actionId must be defined"),this.id=c,this._onUpdate=new a(d),this._options={actionId:t,...n},this.update(n),this._loadOptionsGetter=r??null,this._loadOptionsGetter&&(this._options.loading=!0),s&&(this._customAction=new l({actionId:t,options:s,optionsLoader:u,id:c}))}custom(){return this._customAction}execute(){this._options.checkable&&this.update({checked:!this._options.checked}),this._options.onExecute&&this._options.onExecute(this)}getLabel(){return this._options.label||""}getSubItems(){return this._options.subItems||[]}isDisabled(){return!0===this._options.disabled}isActive(){return!0===this._options.active}isCheckable(){return!0===this._options.checkable}isChecked(){return!0===this._options.checked}isLoading(){return!0===this._options.loading}loadOptions(){return this._loadOptionsPromise?this._loadOptionsPromise:this._loadOptionsGetter?(this._loadOptionsPromise=this._loadOptionsGetter().then((e=>this.update({...e,loading:!1}))),this._loadOptionsPromise):null}getSize(){return this._options.size??"normal"}getPayload(){return this._options.payload}update(e){this._destroyed||(this._unbindShortcut(),e.hotkeyHash&&(this._options.shortcutHint=(0,r.humanReadableHash)(e.hotkeyHash)),this._options=Object.assign(this._options,e),this._bindShortcut(),this._onUpdate.fire(this))}onUpdate(){return this._onUpdate}
getState(){return this.loadOptions(),{actionId:this._options.actionId,label:this.getLabel(),styledLabel:this._options.styledLabel,disabled:this.isDisabled(),active:this.isActive(),subItems:this.getSubItems(),checkable:this.isCheckable(),checked:this.isChecked(),loading:this.isLoading(),size:this.getSize(),doNotCloseOnClick:this._options.doNotCloseOnClick||!1,shortcutHint:this._options.shortcutHint,hint:this._options.hint,icon:this._options.icon,iconId:this._options.iconId,iconChecked:this._options.iconChecked,toolbox:this._options.toolbox,showToolboxOnHover:this._options.showToolboxOnHover||!1,statName:this._options.statName,name:this._options.name,invisibleHotkey:this._options.invisibleHotkey,noInteractive:this._options.noInteractive,jsxLabel:"jsxLabel"in this._options?this._options.jsxLabel:void 0,isRepeatAccepted:this._options.isRepeatAccepted}}destroy(){this._destroyed=!0,this._onUpdate.destroy(),this._unbindShortcut(),this._options.onDestroy?.(),this._customAction?.destroy()}options(){return this._options}_bindShortcut(){if(!this._options.hotkeyGroup||!this._options.hotkeyHash)return;const e="string"==typeof this._options.label?this._options.label:this._options.name;this._hotkeyAction=this._options.hotkeyGroup.add({hotkey:this._options.hotkeyHash,isRepeatAccepted:this._options.isRepeatAccepted,desc:e,handler:()=>this.execute(),isDisabled:()=>this.isDisabled()})}_unbindShortcut(){this._hotkeyAction&&(this._hotkeyAction.destroy(),delete this._hotkeyAction)}}class u{constructor(e){this.type="separator",this.id=o.guid(),this._hint=e}getHint(){return this._hint}}class c extends l{constructor(e){super({actionId:e,options:{}})}isLoading(){return!0}getSize(){return"big"}}},910282:(e,t,n)=>{n.d(t,{CHART_FONT_FAMILY:()=>s,CHART_MONOSPACE_FONT_FAMILY:()=>a});var i=n(314802);const r="'Trebuchet MS', Roboto, Ubuntu, sans-serif",o=`-apple-system, BlinkMacSystemFont, ${r}`;let s=((0,i.isOnMobileAppPage)("old"),r);const a="monospace";{const e=["U+2E80-2FD5","U+3040-309F","U+1B100-1B12F","U+1AFF0-1AFFF","U+1B000-1B0FF","U+1B130-1B16F","U+3190-319F","U+30A0-30FF","U+31F0-31FF","U+3400-4DBF","U+4E00-9FFF","U+0E00-0E7F"],t=s;(async()=>{if(!/iPhone OS 15_\d+?/.test(navigator.userAgent))return o;{if(["kr","zh_CN","zh_TW"].includes(window.locale))return s;const t=new FontFace("ChartIosFont","local(Helvetica), local(Arial)",{unicodeRange:e.join(", ")});try{return document.fonts.add(await t.load()),`ChartIosFont, ${o}`}catch(e){return s}}})().then((e=>{t===s&&(s=e)}))}},191914:(e,t,n)=>{n.d(t,{customFormatters:()=>i});const i={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,priceFormatterFactory:null,studyFormatterFactory:null}},472354:(e,t,n)=>{n.d(t,{lineToolsDoNotAffectChartInvalidation:()=>i});const i=!0},951827:(e,t,n)=>{n.d(t,{getNumericFormatter:()=>c,getPercentageFormatter:()=>d,getPipFormatter:()=>p,getVolumeFormatter:()=>f});var i=n(808708),r=n(722652),o=n(291066),s=n(220129);class a extends s.PriceFormatter{constructor(e){const{priceScale:t,minMove:n=1,type:i,typespecs:r,minMove2:s,ignoreLocaleNumberFormat:a}=e
;("forex"===i||(0,o.isCFDSymbol)(i,r))&&s?(super({priceScale:s,ignoreLocaleNumberFormat:a}),this._isForex=!0):(super({priceScale:1,ignoreLocaleNumberFormat:a}),this._isForex=!1),this._pipPriceScale=t,this._pipMinMove=n,this._pipMinMove2=s}format(e,t={}){const{signPositive:n,tailSize:i,ignoreLocaleNumberFormat:r}=t;let o=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===o&&(o=NaN),super.format(e*this._pipPriceScale/o,{signPositive:n,tailSize:i,ignoreLocaleNumberFormat:r})}}var l=n(51196),u=n(909456);const c=(0,u.numDependencyFormatter)((e=>new i.NumericFormatter({precision:e}))),d=(0,u.numDependencyFormatter)((e=>new r.PercentageFormatter({priceScale:Math.pow(10,e??2),minMove:1}))),f=(0,u.numDependencyFormatter)((e=>new l.VolumeFormatter({precision:e}))),_=new WeakMap;function p(e){let t=_.get(e);return t||(t=new a({priceScale:e.pricescale,minMove:e.minmov,minMove2:e.minmove2,type:e.type,typespecs:e.typespecs}),_.set(e,t)),t}},65840:(e,t,n)=>{n.d(t,{coordinateIsValid:()=>m,extendAndClipLineSegment:()=>c,fillScaledRadius:()=>E,getArrowPoints:()=>d,interactionTolerance:()=>h,optimalBarWidth:()=>f,optimalCandlestickWidth:()=>_,optimalHiLoWidth:()=>p,roundToMax:()=>T,setValidLineStyle:()=>S,strokeScaledRadius:()=>g});var i=n(536794),r=n(86441),o=n(5531),s=n(822961),a=n(338242);const l={common:13,line:13,tradingLine:16,minDistanceBetweenPoints:10,series:14,curve:10,anchor:13,esd:4},u={common:3,line:3,tradingLine:3,minDistanceBetweenPoints:5,series:2,curve:3,anchor:2,esd:0};function c(e,t,n,i,s,a){if((0,r.equalPoints)(e,t))return null;const l=new r.Point(0,0),u=new r.Point(n,i);if(s){if(a){const n=(0,o.intersectLineAndBox)((0,r.lineThroughPoints)(e,t),(0,r.box)(l,u));return Array.isArray(n)?n:null}{const n=(0,o.intersectRayAndBox)(t,e,(0,r.box)(l,u));return null===n||(0,r.equalPoints)(t,n)?null:(0,r.lineSegment)(t,n)}}if(a){const n=(0,o.intersectRayAndBox)(e,t,(0,r.box)(l,u));return null===n||(0,r.equalPoints)(e,n)?null:(0,r.lineSegment)(e,n)}{const n=(0,o.intersectLineSegmentAndBox)((0,r.lineSegment)(e,t),(0,r.box)(l,u));return Array.isArray(n)?n:null}}function d(e,t,n,i,r){const o=.5*n,s=Math.sqrt(2),a=t.subtract(e),l=a.normalized();let u=5*n;i&&(u=Math.min(u,.35*a.length()));const c=1*o;if(u*s*.2<=c)return[];const d=l.scaled(u),f=t.subtract(d),_=l.transposed(),p=1*u,h=_.scaled(p),m=f.add(h),S=f.subtract(h),E=m.subtract(t).normalized().scaled(c),g=S.subtract(t).normalized().scaled(c),T=r?t:t.add(E),A=r?t:t.add(g),I=o*(s-1),R=_.scaled(I),v=Math.min(u-1*o/s,o*s*1),P=l.scaled(v),O=t.subtract(R),N=t.add(R),C=t.subtract(P);return[[m,T],[A,S],[O,C.subtract(R)],[N,C.add(R)]]}function f(e,t){return t=t||1,Math.floor(.3*e*t)}function _(e,t){if(e>=2.5&&e<=4)return Math.floor(3*t);const n=1-.2*Math.atan(Math.max(4,e)-4)/(.5*Math.PI),i=Math.floor(e*n*t),r=Math.floor(e*t),o=Math.min(i,r);return Math.max(Math.floor(t),o)}function p(e){return.4*e}function h(){return(0,s.lastMouseOrTouchEventInfo)().isTouch?l:u}function m(e){return null!=e&&!(0,i.isNaN)(e)}function S(e,t){void 0!==t&&(0,a.setLineStyle)(e,t)}
function E(e,t){const n=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+n}function g(e,t,n){const i=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+(i!==n%2?.5:0)}function T(e){return Math.max(Math.floor(e),1)}},397535:(e,t,n)=>{n.d(t,{PriceRange:()=>o,mergePriceRanges:()=>s});var i=n(810715);const r=(0,n(735566).getLogger)("Chart.PriceRange");class o{constructor(e,t){if(null!==e&&"object"==typeof e){const t=e;this._minValue=t.m_minValue,this._maxValue=t.m_maxValue}else{const n=e;this._minValue=n,void 0!==t&&(this._maxValue=t)}}equals(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue}clone(){return new o(this._minValue,this._maxValue)}minValue(){return this._minValue}setMinValue(e){this._minValue=e}maxValue(){return this._maxValue}setMaxValue(e){this._maxValue=e}length(){return this._maxValue-this._minValue}isEmpty(){return this._maxValue===this._minValue||this._maxValue!=this._maxValue||this._minValue!=this._minValue}serialize(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}}state(){return{max:this._maxValue,min:this._minValue}}merge(e){return new o(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))}apply(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)}set(e,t){this._minValue=e,this._maxValue=t}scaleAroundCenter(e){if(!(0,i.isNumber)(e))return void r.logDebug("PriceRange.scaleAroundCenter: invalid coeff");if(0===this._maxValue-this._minValue)return;const t=.5*(this._maxValue+this._minValue);let n=this._maxValue-t,o=this._minValue-t;n*=e,o*=e,this._maxValue=t+n,this._minValue=t+o}shift(e){(0,i.isNumber)(e)?(this._maxValue+=e,this._minValue+=e):r.logDebug("PriceRange.shift: invalid coeff")}containsStrictly(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue}containPrice(e){return e>=this._minValue&&e<=this._maxValue}intersection(e){return this.containPrice(e.minValue())||this.containPrice(e.maxValue())||e.containPrice(this._minValue)?new o(Math.max(this._minValue,e.minValue()),Math.min(this._maxValue,e.maxValue())):null}static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}function s(e){return e.reduce(((e,t)=>e?t?e.merge(t):e:t),null)}},321870:(e,t,n)=>{n.d(t,{compareResolutions:()=>a,getApplicableIntervalForFrequency:()=>l,maxResolutionValues:()=>r});var i=n(477786);const r={[i.ResolutionKind.Ticks]:1,[i.ResolutionKind.Seconds]:60,[i.ResolutionKind.Minutes]:1440,[i.SpecialResolutionKind.Hours]:24,[i.ResolutionKind.Days]:365,[i.ResolutionKind.Weeks]:52,[i.ResolutionKind.Months]:12,[i.ResolutionKind.Range]:1e6,[i.ResolutionKind.Invalid]:NaN},o={[i.ResolutionKind.Ticks]:0,[i.ResolutionKind.Seconds]:1,[i.ResolutionKind.Minutes]:2,[i.SpecialResolutionKind.Hours]:3,[i.ResolutionKind.Days]:4,[i.ResolutionKind.Weeks]:5,[i.ResolutionKind.Months]:6,[i.ResolutionKind.Range]:7,[i.ResolutionKind.Invalid]:8};function s(e){const t=i.Interval.parse(e),n=t.multiplier()||1;return t.isMinuteHours()?[i.SpecialResolutionKind.Hours,n/60]:[t.kind(),n]}function a(e,t){if(e===t)return 0
;const[n,i]=s(e),[r,a]=s(t);return n!==r?o[n]-o[r]:i-a}function l(e,t){return a(t,e)>=0?t:e}},64262:(e,t,n)=>{n.d(t,{compareResolutions:()=>f.compareResolutions,convertResolutionsFromSettings:()=>I,getApplicableIntervalForFrequency:()=>f.getApplicableIntervalForFrequency,getCustomResolutions:()=>P,getMaxResolutionValue:()=>A,getResolutionByChartStyle:()=>E,getTranslatedResolution:()=>O,getTranslatedResolutionModel:()=>N,intervalIsSupported:()=>w,isAvailable:()=>m,isIntervalEnabled:()=>b,isResolutionMultiplierValid:()=>g,isSecondsEnabled:()=>y,mergeResolutions:()=>R,normalizeIntervalString:()=>h,setLastUsedResolution:()=>S,sortResolutions:()=>v});var i=n(444372),r=n(477786),o=n(388741),s=n(62802),a=n(583912),l=n(999102),u=n(536794),c=n(213377),d=n(303999),f=n(321870);const _=[1,5,10,15,30,45],p=[1,10,100,1e3];function h(e){return r.Interval.parse(e).value()}function m(e){const t=r.Interval.parse(e);if(t.isRange())return a.linking.range.value();if(!(0,d.isTicksEnabled)()&&t.isTicks())return!1;const n=t.value(),i=a.linking.dataFrequencyResolution.value();if(void 0!==i&&(0,f.compareResolutions)(n,i)<0)return!1;const o=a.linking.supportedResolutions.value();return void 0!==o?void 0!==o.find((e=>h(e)===n)):t.isTicks()?Boolean(a.linking.ticks.value()):t.isIntraday()?Boolean(a.linking.intraday.value()):t.isDWM()}function S(e){r.Interval.isValid(e)&&(r.Interval.isRange(e)?s.setValue("chart.lastUsedRangeResolution",e):s.setValue("chart.lastUsedTimeBasedResolution",e))}function E(e,t,n){const i=o.isRangeStyle(e),a=r.Interval.isRange(t);return!i&&a?function(e){const t=s.getValue("chart.lastUsedTimeBasedResolution");if(void 0!==t&&r.Interval.isTimeBased(t))return t;let n="1D";for(const t of e){const e=r.Interval.parse(t);if(e.isTimeBased()){const t=e.value();if("1D"===t)return t;n=t}}return n}(n):i&&!a?function(e){const t=s.getValue("chart.lastUsedRangeResolution");if(void 0!==t&&r.Interval.isRange(t))return t;let n="100R";for(const t of e){const e=r.Interval.parse(t);if(e.isRange()){const t=e.value();if("100R"===t)return t;n=t}}return n}(n):t}function g(e){const{interval:t,guiResolutionKind:n}=r.Interval.parseExt(e);if(!t.isValid())return!1;const i=t.multiplier();if(n===r.ResolutionKind.Seconds)return _.includes(i);if((0,d.isTicksEnabled)()&&n===r.ResolutionKind.Ticks)return p.includes(i);return(n===r.SpecialResolutionKind.Hours?i/60:i)<=T(n)}function T(e){const t=f.maxResolutionValues[e];return Number.isNaN(t)?1:t}function A(e){return T(r.Interval.parseExt(e).guiResolutionKind)}function I(e){return Array.isArray(e)?e:Object.keys(e).map(r.Interval.normalize).filter(u.notNull)}function R(...e){let t=[].concat(...e);return t=(0,l.uniq)(t.filter(g).map(h)),v(t)}function v(e){return e.sort(f.compareResolutions)}function P(){let e=[];return window.user.is_pro&&(e=function(e){const t=I(s.getJSON(e,[]));return(0,l.uniq)(t.filter(g).map(h))}("IntervalWidget.intervals")),e}function O(e){const{multiplier:t,shortKind:n}=N(e);return`${t}${n}`}function N(e,t){const n=r.Interval.parse(e);let i=n.multiplier(),o=n.kind();if(!n.isValid()){
if(t)return null;throw new TypeError(`Can't translate invalid interval: ${e}`)}return n.isMinuteHours()&&(i=Math.floor(i/60),o=r.SpecialResolutionKind.Hours),{multiplier:i.toString(),shortKind:C(o),hint:`${i} ${C(o,i)}`,mayOmitMultiplier:n.isDWM()&&1===i,mayOmitShortKind:n.isMinutes()&&!n.isMinuteHours()}}function C(e,t){if(!t)return{[r.ResolutionKind.Invalid]:"",[r.ResolutionKind.Ticks]:i.t(null,{context:"interval_short"},n(882901)),[r.ResolutionKind.Seconds]:i.t(null,{context:"interval_short"},n(968823)),[r.ResolutionKind.Minutes]:i.t(null,{context:"interval_short"},n(768430)),[r.SpecialResolutionKind.Hours]:i.t(null,{context:"interval_short"},n(438048)),[r.ResolutionKind.Days]:i.t(null,{context:"interval_short"},n(38691)),[r.ResolutionKind.Weeks]:i.t(null,{context:"interval_short"},n(307408)),[r.ResolutionKind.Months]:i.t(null,{context:"interval_short"},n(977995)),[r.ResolutionKind.Range]:i.t(null,{context:"interval_short"},n(993934))}[e];switch(e){case r.ResolutionKind.Ticks:return i.t(null,{plural:"ticks",count:t},n(111913));case r.ResolutionKind.Days:return i.t(null,{plural:"days",count:t},n(641807));case r.ResolutionKind.Weeks:return i.t(null,{plural:"weeks",count:t},n(448898));case r.ResolutionKind.Months:return i.t(null,{plural:"months",count:t},n(898393));case r.ResolutionKind.Seconds:return i.t(null,{plural:"seconds",count:t},n(33232));case r.ResolutionKind.Minutes:return i.t(null,{plural:"minutes",count:t},n(378318));case r.SpecialResolutionKind.Hours:return i.t(null,{plural:"hours",count:t},n(942328));case r.ResolutionKind.Range:return i.t(null,{plural:"ranges",count:t},n(189937));default:return e}}function y(){return!0}function L(e){return!(!(0,d.isTicksEnabled)()&&e.isTicks())}function b(e){return L(r.Interval.parse(e))}function w(e){if(c.enabled("allow_supported_resolutions_set_only")){const t=r.Interval.normalize(e);return null!==t&&m(t)}{const t=r.Interval.parse(e);if(!t.isValid()||!L(t))return!1;if(!c.enabled("custom_resolutions")){const t=r.Interval.normalize(e),n=window.ChartApiInstance.defaultResolutions().filter(b);if(!t||-1===n.indexOf(t))return!1}const n=a.linking.dataFrequencyResolution.value();if(void 0!==n&&(0,f.getApplicableIntervalForFrequency)(n,t.value())!==t.value())return!1;if(t.isRange())return a.linking.range.value();if(t.isTicks())return a.linking.ticks.value();if(t.isIntraday())return a.linking.intraday.value();{const e=a.linking.supportedResolutions.value();return!e||e.includes(t.value())}}}},111332:(e,t,n)=>{var i=n(779893),r=n(345848).trackEvent,o=n(735566).getLogger("Pine.ScriptLib"),s=n(175203).telemetry,a={fast:["delete","get","is_auth_to_get","is_auth_to_write","parse_title","rename","lib_list"],medium:["list","eval_pine_ex","translate_light"],slow:["process_legacy","publish","save","translate","translate_source","gen_alert"]},l=/[l|L]ines? (\d*)/;function u(e){if("object"==typeof e.reason)return e.reason;if(e.reason2)return e.reason2;const t={errors:[],warnings:[]},n=e.result&&e.result.metaInfo;if(n&&void 0!==n.warnings&&n.warnings.forEach((e=>t.warnings.push({message:e
}))),e.reason){(Array.isArray(e.reason)?e.reason:e.reason.split("\n")).forEach((e=>{const n=e.match(l),i=n&&n.length&&Number(n[1]),r={message:e};if("number"==typeof i){r.start={line:i,column:0};const e=r.message.split(": ");e.shift(),r.message=e.join(": ")}t.errors.push(r)}))}return t}var c={getPineFacadeUrl:function(){return window.PINE_URL},PINE_FACADE_URL:function(){return window.PINE_URL}};c.safetyGetReason=u,c._pineFacadeAjax=function(e,t,n){o.logNormal("Requesting pine facade scripts, url: "+t);var r=function(e){for(var t=Object.keys(a),n=0;n<t.length;n++){var i=a[t[n]].filter((function(t){return-1!==e.indexOf(t)}));if(Boolean(i.length))return t[n]}return!1}(t),l=Date.now();return i.ajax({url:c.PINE_FACADE_URL()+t,type:e,data:n||{},dataType:"json",xhrFields:{withCredentials:!0}}).done((function(){var e=Date.now()-l;s.sendReport("pine",r+"_group_time_frame",{value:e}),s.sendReport("pine",r+"_group_ok"),o.logNormal("Requesting pine facade scripts finished, url: "+t)})).fail((function(){var e=Date.now()-l;s.sendReport("pine",r+"_group_time_frame",{value:e}),s.sendReport("pine",r+"_group_error"),o.logError("Requesting pine facade scripts failed, url: "+t)}))},c._generateAlertAsyncDone=function(e,t){if(t.error)e.reject(c._readableError(t.error));else if(t.success)e.resolve(t.result.metaInfo,t.result.IL,t.result.inputs||null,t.result.gen_alert_data||null);else{var n=t.result?t.result.metaInfo:null;e.reject(u(t),n)}},c._readableError=function(e,t){return t},c._anyRequestAsyncFail=function(e,t){try{const n=u(JSON.parse(t.responseText));if(n)return e.reject(n)}catch(e){}0===c.PINE_FACADE_URL().indexOf("http")&&o.logError(t.responseText),e.reject(c._readableError(t.status,t.statusText))},c.getPineSourceCode=function(e,t,n){r("Pine","ScriptLib.getPineSourceCode");var o=i.Deferred(),s="?no_4xx="+!!n,a="/get/"+encodeURIComponent(e)+"/"+t+s;return c._pineFacadeAjax("GET",a).done((function(e,t,n){!1===e.success?o.reject(u(e)):o.resolve(e)})).fail((function(e,t,n){c._anyRequestAsyncFail(o,e)})),o.promise()},c.generateAlert=function(e){r("Pine","ScriptLib.generateAlert");var t=i.Deferred(),n=window.user&&window.user.username,o="/gen_alert/?user_name="+encodeURIComponent(n),a={alert_info:e},l=Date.now();return c._pineFacadeAjax("POST",o,a).done((function(e,n,i){s.sendReport("alerts","compilation_ok"),c._generateAlertAsyncDone(t,e)})).fail((function(e,n,i){s.sendReport("alerts","compilation_error"),c._anyRequestAsyncFail(t,e)})).always((function(){var e=Date.now()-l;s.sendReport("alerts","compilation_time_frame",{value:e})})),t.promise()},c.scriptUpdater=function(){return window.scriptUpdater()},c.requestUserPublishedScripts=function(e,t){if(r("Pine","ScriptLib.requestUserPublishedScripts"),window.is_authenticated){if(t||!c._userPublishedScriptsDfd){c._userPublishedScriptsDfd=i.Deferred();var n=c._userPublishedScriptsDfd;c._pineFacadeAjax("GET","/list?filter=published").done((function(e,t,i){n.resolve(e)})).fail((function(e){c._anyRequestAsyncFail(n,e)}))}n=c._userPublishedScriptsDfd}else n=i.Deferred().resolve([])
;return"function"==typeof e&&n.done(e),n.promise()},c.requestInfoForScripts=function(e){return Promise.all([c._pineFacadeAjax("GET","/list?filter=saved"),c._pineFacadeAjax("GET","/list?filter=addon")]).then((function(t){var n=t[0],i=t[1];return n.concat(i).filter((function(t){return e.includes(t.scriptIdPart)}))}))},c.requestBuiltinAndUserScripts=function(){r("Pine","ScriptLib.requestBuiltinAndUserScripts"),o.logNormal("Request built-in and user scripts");var e,t=window.user&&window.user.username,n={},i=new Promise((function(t,i){e=t,n.reject=i}));return Promise.all([c._pineFacadeAjax("GET","/list?filter=saved&user_name="+encodeURIComponent(t)),c._pineFacadeAjax("GET","/list?filter=standard")]).then((function(t){o.logNormal("Request built-in and user scripts finished");var n=t[0],i=t[1];e(n.concat(i))})).catch((function(e){o.logWarn("Request built-in and user scripts finished with fail"),c._anyRequestAsyncFail(n,e)})),i},c.requestScriptInfo=function(e){r("Pine","ScriptLib.requestBuiltinAndUserScripts"),o.logNormal("Request public/user script info");var t=i.Deferred();return c._pineFacadeAjax("GET","/get_script_info/?pine_id="+encodeURIComponent(e)).done((function(e){o.logNormal("Request public/user script info finished"),t.resolve(e)})).fail((function(e){o.logWarn("Request public/user script info finished with fail"),c._anyRequestAsyncFail(t,e)})),t.promise()},c.requestCandlestickScripts=function(){var e;r("Pine","ScriptLib.requestCandlestickScripts"),o.logNormal("Request candlestick scripts");var t={},n=new Promise((function(n,i){e=n,t.reject=i}));return c._pineFacadeAjax("GET","/list?filter=candlestick").done((function(t){o.logNormal("Request candlestick scripts finished"),e(t)})).fail((function(e){o.logWarn("Request candlestick scripts finished with fail"),c._anyRequestAsyncFail(t,e)})),n};var d={time:-1/0,request:null};c.requestFundamentalScripts=function(){if(d.time+6e5>Date.now()&&null!==d.request)return o.logNormal("Return fundamentals from cache"),d.request;o.logNormal("Request fundamental scripts");var e=c._pineFacadeAjax("GET","/list?filter=fundamental");return e.then((function(e){o.logNormal("Request fundamental scripts finished")})),e.fail((function(e){o.logWarn("Request fundamental scripts finished with fail, resetting cache"),d.request=null})),d.time=Date.now(),d.request=Promise.resolve(e.promise()),d.request},c.publishNew=function(e,t,n,o){r("Pine","ScriptLib.publishNew");var s=i.Deferred(),a=window.user&&window.user.username,l="/publish/new/?access="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(a),d={source:e,extra:JSON.stringify({originalScriptId:n,originalScriptVersion:o})};return c._pineFacadeAjax("POST",l,d).done((function(e,t,n){e.success?s.resolve(e):s.reject(u(e))})).fail((function(e,t,n){c._anyRequestAsyncFail(s,e)})),s.promise()},c.publishNext=function(e,t,n,s){o.logNormal("ScriptLib.publishNext","pine"),r("Pine","ScriptLib.publishNext");var a=i.Deferred(),l=window.user&&window.user.username,d="/publish/next/"+encodeURIComponent(t)+"?user_name="+encodeURIComponent(l),f={source:e,
extra:JSON.stringify({originalScriptId:n,originalScriptVersion:s})};return c._pineFacadeAjax("POST",d,f).done((function(e,t,n){e.success||a.reject(u(e)),a.resolve(e)})).fail((function(e,t,n){c._anyRequestAsyncFail(a,e)})),a.promise()},c.lightTranslate=function(e,t){return o.logNormal("ScriptLib.lightTranslate","pine"),r("Pine","ScriptLib.lightTranslate"),new Promise((function(n,i){var r=window.user&&window.user.username,o=`/translate_light/?user_name=${encodeURIComponent(r)}`;t&&(o+=`&pine_id=${encodeURIComponent(t)}`);var s={source:e};c._pineFacadeAjax("POST",o,s).done((function(e,t,r){if(e.success)n(e.result);else{var o=e.result&&u(e.result)||u(e);i(o)}})).fail((function(e,t,n){c._anyRequestAsyncFail({reject:i},e)}))}))},c.getLibList=function(e,t,n){return o.logNormal("ScriptLib.getLibList","pine"),r("Pine","ScriptLib.getLibList"),new Promise((function(i,r){var o="/lib_list?lib_id_prefix="+encodeURIComponent(e);t&&(o+="&ignore_cache=true"),n&&(o+="&ignore_case=true"),c._pineFacadeAjax("GET",o).done((function(e,t,n){i(e)})).fail((function(e,t,n){c._anyRequestAsyncFail({reject:r},e)}))}))},c.getExistingLibraryInfo=async function(e){try{const t=await c.getLibList(e+"/last",!0,!0);if(!t.length)return null;const n=t[0];return{scriptIdPart:n.scriptIdPart,chartId:n.chartId,version:n.version}}catch(e){return null}},e.exports=c},998886:(e,t,n)=>{n.d(t,{getErrorFromUnsupportedResolutionState:()=>u,getResolutionUnsupportedReason:()=>c});var i=n(444372),r=n(477786),o=n(64262);const s=i.t(null,void 0,n(864818)),a=i.t(null,void 0,n(780254)),l=i.t(null,void 0,n(180185));function u(e,t=!1){const n=t?`<b>${e.ticker}</b>`:e.ticker;switch(e.reason){case"unsupported_resolution":{const i=t?`<b>${e.supportedResolutions.join(", ")}</b>`:e.supportedResolutions.join(", ");return s.format({ticker:n,availableResolutions:i})}case"unsupported_ticks":return a.format({ticker:n});case"less_than_frequency":{const i=t?`<b>${e.applicableResolution}</b>`:e.applicableResolution;return l.format({ticker:n,resolution:i})}}}function c(e,t){if(null===e)return null;const n=e.data_frequency;if(void 0!==n){if((0,o.getApplicableIntervalForFrequency)(n,t)!==t)return"less_than_frequency"}return r.Interval.isIntraday(t)&&!e.has_intraday?"unsupported_resolution":r.Interval.isTicks(t)&&!e["is-tickbars-available"]?"unsupported_ticks":null}},808825:(e,t,n)=>{var i;n.d(t,{StudyStatusType:()=>i}),function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed",e[e.Error=3]="Error"}(i||(i={}))},9880:(e,t,n)=>{n.d(t,{getAlertsFiresFocusHandler:()=>i});const i=(0,n(481251).default)((async()=>{const{AlertsFiresFocusHandler:e}=await n.e(69581).then(n.bind(n,469517));return new e}))},972806:(e,t,n)=>{var i;n.d(t,{AlertEditorAbortReason:()=>i}),function(e){e.AlertIsInvalid="alert-is-invalid",e.AlertsMaintenance="alerts-maintenance",e.ChartModelNotFound="chart-model-not-found",e.IsAlreadyPresent="is-already-present",e.MainSeriesIsATR="main-series-is-atr",e.MainSeriesIsPercentageLTP="main-series-is-percentage-ltp",
e.MainSeriesIsInReplay="main-series-is-in-replay",e.MainSeriesIsOffline="main-series-is-offline",e.SourceIsDangerous="source-is-dangerous",e.SymbolInfoTimeout="symbol-info-timeout",e.SymbolIsInvalid="symbol-is-invalid",e.SymbolCurrencyConverted="symbol-currency-converted",e.SymbolUnitConverted="symbol-unit-converted",e.SymbolCurrencyAndUnitConverted="symbol-currency-and-unit-converted",e.SymbolIsEconomics="symbol-is-economics",e.UnsupportedResolution="unsupported-resolution",e.ManualAbort="manual-abort",e.MisleadingPriceScale="misleading-price-scale",e.ResolutionIsTicks="resolution-is-ticks"}(i||(i={}))},534328:(e,t,n)=>{n.r(t),n.d(t,{alphaToTransparency:()=>s,applyAlpha:()=>o,applyTransparency:()=>l,colorFromBackground:()=>f,colorToInteger:()=>S,generateColor:()=>r,getLuminance:()=>c,gradientColorAtPercent:()=>_,isColorDark:()=>p,isHexColor:()=>d,resetTransparency:()=>u,rgbaFromInteger:()=>h,rgbaToInteger:()=>m,transparencyToAlpha:()=>a});var i=n(724377);function r(e,t,n){if(t=t||0,!d(e))return n?(0,i.rgbaToString)((0,i.rgba)((0,i.parseRgb)(e),(0,i.normalizeAlphaComponent)(a(t)))):e;const[r,o,s]=(0,i.parseRgb)(e),l=(0,i.normalizeAlphaComponent)(a(t));return(0,i.rgbaToString)([r,o,s,l])}function o(e,t,n){const r=(0,i.tryParseRgba)(e);if(null===r)throw new Error(`Invalid color: ${e}`);const[o,s,a,l]=r,u=(0,i.normalizeAlphaComponent)(t*(n?l:1));return(0,i.rgbaToString)((0,i.rgba)([o,s,a],u))}function s(e){return 100*(1-e)}function a(e){if(e<0||e>100)throw new Error("invalid transparency");return 1-e/100}function l(e,t){if("transparent"===e)return e;const n=(0,i.parseRgba)(e),r=n[3];return(0,i.rgbaToString)((0,i.rgba)(n[0],n[1],n[2],a(t)*r))}function u(e){return"transparent"===e?e:d(e)?e.slice(0,7):(0,i.rgbaToString)((0,i.rgba)((0,i.parseRgb)(e),(0,i.normalizeAlphaComponent)(1)))}function c(e){const t=(0,i.parseRgb)(e).map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function d(e){return 0===e.indexOf("#")}function f(e){return"black"===(0,i.rgbToBlackWhiteString)((0,i.parseRgb)(e),150)?"#ffffff":"#000000"}function _(e,t,n){const[r,o,s,a]=(0,i.parseRgba)(e),[l,u,c,d]=(0,i.parseRgba)(t),f=(0,i.rgba)(Math.round(r+n*(l-r)),Math.round(o+n*(u-o)),Math.round(s+n*(c-s)),a+n*(d-a));return(0,i.rgbaToString)(f)}function p(e){return c(u(e))<.5}function h(e){const t=(e=Math.round(e))%256;e-=t;const n=(e/=256)%256;e-=n;const i=(e/=256)%256;e-=i;return`rgba(${t},${n},${i},${(e/=256)/255})`}function m(e){const t=Math.round(255*e[3]);return e[0]+256*e[1]+65536*e[2]+16777216*t}function S(e){const t=(0,i.tryParseRgba)(e);return null===t?0:m(t)}},398290:(e,t,n)=>{n.d(t,{generateColorCached:()=>s});var i=n(259332),r=n(534328),o=n(850117);function s(e=1e3){const t=i.default.Cache;i.default.Cache=o.CircularCacheBuffer.bind(o.CircularCacheBuffer,e);const n=(0,i.default)(r.generateColor,((e,t,n)=>`${e}_${t}_${n}`));return i.default.Cache=t,n}},837462:(e,t,n)=>{function i(e,t,n,i){return`${i?i+" ":""}${n?n+" ":""}${e}px ${t}`}n.d(t,{makeFont:()=>i,parseFont:()=>o})
;const r=/(bold )?(italic )?(\d+)(px|pt) (.*)$/;function o(e){const t=r.exec(e);return null===t?null:{family:t[5],size:parseInt(t[3])*("pt"===t[4]?.75:1),bold:Boolean(t[1]),italic:Boolean(t[2])}}},136734:(e,t,n)=>{n.d(t,{getPersistentLogger:()=>r,setPersistentLogger:()=>o});let i=null;function r(){return i}function o(e){i=e}},362313:(e,t,n)=>{async function i(e){(await Promise.all([n.e(46956),n.e(37656),n.e(92537),n.e(39759),n.e(18883),n.e(52186),n.e(19190),n.e(65161),n.e(98681),n.e(67131),n.e(59546),n.e(82332),n.e(94036),n.e(25974),n.e(33595),n.e(94967),n.e(7276),n.e(51989),n.e(17725),n.e(32227),n.e(59844),n.e(87288),n.e(94718),n.e(7160),n.e(26863),n.e(94913)]).then(n.bind(n,729286))).renderRunOrSigninWithFeatureDialog(e)}n.d(t,{createRunOrSigniWithFeatureDialog:()=>i})},541543:(e,t,n)=>{n.d(t,{runOrSigninWithFeature:()=>s});var i=n(120296),r=n(362313),o=n(314802);const s=(e,t)=>{{if((0,o.isOnMobileAppPage)("any"))return void window.runOrSignIn(e,t);const n=[];if(t.paidAccountCheck&&n.push((()=>(0,i.paidAccountCheck)({successButtonText:t.paidAccountSuccessButtonText}))),window.is_authenticated)n.reduce(((e,t)=>e.then(t)),Promise.resolve()).then(e).catch((()=>{}));else{const n={source:t.source,sourceMeta:t.sourceMeta,feature:t.feature,mode:t.mode,startTrial:t.startTrial};(0,r.createRunOrSigniWithFeatureDialog)({signInSuccess:e,options:n})}}};window.TradingView.runOrSigninWithFeature=s}}]);